{"id":"webrun-vcs-1v6","title":"Test tasks","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:41:10.975149194+01:00","updated_at":"2025-12-19T19:46:47.014072942+01:00","closed_at":"2025-12-19T19:46:47.014078202+01:00"}
{"id":"webrun-vcs-98d","title":"Worktree API Migration - Consolidate interfaces","description":"Migrate worktree/checkout/staging APIs from packages/vcs/src/interfaces to the new architecture in packages/vcs/src/object-storage and packages/vcs/src/binary-storage.\n\nPlan document: notes/src/2025-12-19/01-[worktree]-api-migration-plan.md\n\nGoals:\n1. Move StagingStore to packages/worktree/src/interfaces\n2. Update store implementations (mem, files, sql, kv)\n3. Replace ObjectStore usage with typed stores\n4. Update commands and transport packages\n5. Handle TempStore location\n6. Remove old interfaces completely","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-19T17:43:04.772864367+01:00","updated_at":"2025-12-19T17:43:04.772864367+01:00"}
{"id":"webrun-vcs-98d.1","title":"Move StagingStore interfaces to packages/worktree/src/interfaces","description":"Phase 1 of API migration.\n\nCreate the following files in packages/worktree/src/interfaces/:\n\n1. staging-store.ts:\n   - StagingStore\n   - StagingEntry\n   - StagingEntryOptions\n   - StagingBuilder\n   - StagingEditor\n   - StagingEdit\n   - MergeStage, MergeStageValue\n\n2. staging-edits.ts:\n   - UpdateStagingEntry\n   - DeleteStagingEntry\n   - DeleteStagingTree\n   - ResolveStagingConflict\n   - SetIntentToAdd\n   - SetAssumeValid\n   - SetSkipWorktree\n\n3. Update packages/worktree/src/interfaces/index.ts to export staging interfaces","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:12.94558472+01:00","updated_at":"2025-12-19T18:28:55.456583694+01:00","closed_at":"2025-12-19T18:28:55.456583694+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webrun-vcs-98d.1","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:12.949680332+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.10","title":"Move FilesApi-dependent implementations from worktree to store-files","description":"Move checkout-command.ts and file-tree-iterator.ts from worktree to store-files/src/worktree/. Remove @statewalker/webrun-files dependency from worktree package.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:05.373053281+01:00","updated_at":"2025-12-19T18:56:49.903184251+01:00","closed_at":"2025-12-19T18:56:49.903184251+01:00","close_reason":"Moved checkout-command.ts and file-tree-iterator.ts from worktree to store-files/src/worktree/. Removed @statewalker/webrun-files dependency from worktree package. All tests pass.","dependencies":[{"issue_id":"webrun-vcs-98d.10","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T18:47:05.377638002+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.2","title":"Update store implementations to import StagingStore from @webrun-vcs/worktree","description":"Phase 2 of API migration.\n\nUpdate these files to import StagingStore from @webrun-vcs/worktree instead of @webrun-vcs/vcs:\n\n1. packages/store-mem/src/staging-store.ts\n2. packages/store-files/src/staging/file-staging-store.ts\n3. packages/store-sql/src/staging-store.ts\n4. packages/store-kv/src/kv-staging-store.ts\n\nAlso update any test files that import StagingStore:\n- packages/store-kv/tests/kv-stores.test.ts\n- packages/store-sql/tests/high-level-stores.test.ts\n- packages/store-mem/tests/memory-stores.test.ts\n- packages/testing/src/suites/staging-store.suite.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:19.586810771+01:00","updated_at":"2025-12-19T18:38:10.76292039+01:00","closed_at":"2025-12-19T18:38:10.76292039+01:00","close_reason":"Updated all store implementations to import StagingStore from @webrun-vcs/worktree: store-mem, store-files, store-sql, store-kv. Also updated testing package.","dependencies":[{"issue_id":"webrun-vcs-98d.2","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:19.592291324+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.2","depends_on_id":"webrun-vcs-98d.1","type":"blocks","created_at":"2025-12-19T17:43:19.594701203+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.3","title":"Replace ObjectStore usage with typed stores (BlobStore, etc.)","description":"Phase 3 of API migration.\n\nReplace the generic ObjectStore interface with typed stores from object-storage:\n\nMapping:\n- ObjectStore.store() → BlobStore.store()\n- ObjectStore.load() → BlobStore.load()\n- ObjectStore.has() → BlobStore.has()\n- ObjectStore.getSize() → use raw store or implement\n- ObjectStore.delete() → implement through BinStore\n- ObjectStore.listObjects() → use BinStore.raw.keys()\n\nFiles to update:\n- packages/vcs/src/base/default-object-store.ts\n- packages/store-files/src/git-*-storage.ts files\n- packages/commands/tests/transport-test-helper.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:27.91741773+01:00","updated_at":"2025-12-19T19:39:21.542825641+01:00","closed_at":"2025-12-19T19:39:21.542825641+01:00","close_reason":"Replaced ObjectStore with BlobStore in GitStore interface and all dependent code","dependencies":[{"issue_id":"webrun-vcs-98d.3","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:27.928630353+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.3","depends_on_id":"webrun-vcs-98d.2","type":"blocks","created_at":"2025-12-19T17:43:27.93086132+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.4","title":"Update commands and transport packages for new API imports","description":"Phase 4 of API migration.\n\nCommands Package (packages/commands/src/):\n- Update types.ts to import StagingStore from @webrun-vcs/worktree\n- Keep using object-storage interfaces for typed stores\n- Remove ObjectStore dependency\n- Update staging edit class imports\n\nTransport Package (packages/transport/src/):\n- Remove ObjectStore dependency from vcs-repository-adapter.ts\n- Use typed stores directly\n\nFiles to update:\n- packages/commands/src/types.ts\n- packages/commands/tests/test-helper.ts\n- packages/transport/src/http-server/vcs-repository-adapter.ts\n- packages/transport/src/http-server/storage-adapter.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:36.346492453+01:00","updated_at":"2025-12-19T19:48:54.81551548+01:00","closed_at":"2025-12-19T19:48:54.81551548+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webrun-vcs-98d.4","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:36.356895023+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.4","depends_on_id":"webrun-vcs-98d.3","type":"blocks","created_at":"2025-12-19T17:43:36.359161037+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.5","title":"Replace TempStore with VolatileStore (or remove)","description":"Phase 5 of API migration.\n\nVolatileStore already exists in packages/vcs/src/binary-storage/volatile/ as a type alias for TempStore. The migration involves:\n\n1. Move interface definition from temp-store.ts to binary-storage/volatile/volatile-store.ts:\n   - Define VolatileStore and VolatileContent as primary interfaces (not type aliases)\n   - Add TempStore/TempContent as deprecated type aliases for backward compatibility (or remove completely)\n\n2. Update implementations:\n   - packages/store-files/src/file-temp-store.ts → Rename to file-volatile-store.ts and implement VolatileStore\n   - packages/vcs/src/binary-storage/volatile/memory-volatile-store.ts already implements VolatileStore\n\n3. Update imports:\n   - All code importing TempStore from @webrun-vcs/vcs should import VolatileStore from @webrun-vcs/vcs/binary-storage\n\n4. Delete packages/vcs/src/interfaces/temp-store.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:45.216456779+01:00","updated_at":"2025-12-19T17:52:04.462151033+01:00","dependencies":[{"issue_id":"webrun-vcs-98d.5","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:45.2267354+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.5","depends_on_id":"webrun-vcs-98d.4","type":"blocks","created_at":"2025-12-19T17:43:45.228980567+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.6","title":"Remove old interfaces from packages/vcs/src/interfaces/","description":"Phase 6 of API migration - Final cleanup.\n\nDelete these files after all migrations are complete:\n- packages/vcs/src/interfaces/object-store.ts\n- packages/vcs/src/interfaces/git-object-store.ts\n- packages/vcs/src/interfaces/staging-store.ts\n- packages/vcs/src/interfaces/staging-edits.ts\n- packages/vcs/src/interfaces/temp-store.ts\n- packages/vcs/src/interfaces/utils/tree-utils.ts\n- packages/vcs/src/interfaces/utils/index.ts\n\nUpdate packages/vcs/src/interfaces/index.ts to only re-export from object-storage.\n\nRun full test suite to verify no regressions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:51.778633105+01:00","updated_at":"2025-12-19T17:43:51.778633105+01:00","dependencies":[{"issue_id":"webrun-vcs-98d.6","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:51.79055614+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.6","depends_on_id":"webrun-vcs-98d.5","type":"blocks","created_at":"2025-12-19T17:43:51.793056144+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.7","title":"Update worktree package internal imports for StagingStore","description":"Update the worktree package's internal files to use local StagingStore interface.\n\nFiles to update:\n- packages/worktree/src/status-calculator.ts\n- packages/worktree/src/checkout-command.ts\n- packages/worktree/src/add-command.ts\n\nTests to update:\n- packages/worktree/tests/checkout-command.test.ts\n- packages/worktree/tests/add-command.test.ts\n- packages/worktree/tests/status-calculator.test.ts\n\nChange imports from '@webrun-vcs/vcs' to local './interfaces/index.js' for StagingStore types.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T17:43:59.553592628+01:00","updated_at":"2025-12-19T18:33:37.043815108+01:00","closed_at":"2025-12-19T18:33:37.043815108+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webrun-vcs-98d.7","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:43:59.563673046+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.7","depends_on_id":"webrun-vcs-98d.1","type":"blocks","created_at":"2025-12-19T17:43:59.565916394+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.8","title":"Analyze and implement missing functionality in new APIs","description":"Check if transport and commands packages need functionality not available in new APIs.\n\nPotentially missing:\n1. listObjects() - Can use BinStore.raw.keys()\n2. getSize() - May need to add to stores or use raw layer\n3. Generic delete - Use through typed stores or BinStore\n4. GitObjectStore header operations - May need to expose if commands need it\n\nTasks:\n- Review transport package usage patterns\n- Review commands package usage patterns\n- Document any gaps\n- Implement missing functionality or document workarounds","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T17:44:06.938748586+01:00","updated_at":"2025-12-19T17:44:06.938748586+01:00","dependencies":[{"issue_id":"webrun-vcs-98d.8","depends_on_id":"webrun-vcs-98d","type":"parent-child","created_at":"2025-12-19T17:44:06.942944597+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-98d.8","depends_on_id":"webrun-vcs-98d.3","type":"blocks","created_at":"2025-12-19T17:44:06.945172591+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98d.9","title":"Move FilesApi-dependent implementations from worktree to store-files","description":"Move checkout-command.ts and file-tree-iterator.ts from worktree to store-files/src/worktree/. Remove @statewalker/webrun-files dependency from worktree package.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:46:57.903709756+01:00","updated_at":"2025-12-19T18:47:23.046912593+01:00","deleted_at":"2025-12-19T18:47:23.046912593+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"webrun-vcs-aq3","title":"move packages/store-files/src/pack to the core vcs package","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T19:41:54.688625167+01:00","updated_at":"2025-12-19T19:41:54.688625167+01:00"}
{"id":"webrun-vcs-daq","title":"remove the packages/store-files/src/format - this code already exists in packages/vcs/src/format","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T19:41:54.777842694+01:00","updated_at":"2025-12-19T19:41:54.777842694+01:00"}
