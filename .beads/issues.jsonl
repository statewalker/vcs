{"id":"webrun-vcs-3xk","title":"[Phase 3.3-TEST] Write unit tests for updated git-storage.ts","description":"Write unit tests for git-storage.ts with new constructor signature. Test creation with RawStore + VolatileStore, verify storage operations work correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.945785927+01:00","updated_at":"2025-12-24T00:57:29.739963336+01:00","closed_at":"2025-12-24T00:57:29.739963336+01:00","dependencies":[{"issue_id":"webrun-vcs-3xk","depends_on_id":"webrun-vcs-zbi","type":"blocks","created_at":"2025-12-23T22:03:01.591352323+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-3ob","title":"Integrate PackDeltaStore with existing components","description":"## Summary\n\nUpdate existing components to use PackDeltaStore and add integration tests.\n\n## Changes Required\n\n### RawStoreWithDelta Integration\n\nUpdate `packages/core/src/delta/raw-store-with-delta.ts`:\n\n```typescript\nexport interface RawStoreWithDeltaOptions {\n  objects: RawStore;\n  deltas: DeltaStore; // Can be PackDeltaStore\n  // ... existing options\n}\n```\n\n### GCController Integration\n\nUpdate `packages/core/src/delta/gc-controller.ts`:\n\n```typescript\nexport interface GCControllerOptions {\n  // ... existing options\n  packDir?: PackDirectory;\n  consolidator?: PackConsolidator;\n}\n\n// Add consolidation step to repack()\n```\n\n### Export Updates\n\nUpdate `packages/core/src/delta/index.ts` and `packages/core/src/pack/index.ts` to export new classes.\n\n## Dependencies\n\n- All previous issues in this epic\n\n## Integration Tests\n\n- Read packs created by Git\n- Write packs readable by Git (`git verify-pack`)\n- Multi-pack queries with chain resolution\n- GC with pack consolidation\n- RawStoreWithDelta with PackDeltaStore\n\n## Git Compatibility Tests\n\n```bash\n# Verify pack format\ngit verify-pack -v pack-*.idx\n\n# Extract objects\ngit unpack-objects \u003c pack-*.pack\n```\n\n## Tests Required\n\n- `packages/core/tests/integration/pack-delta-store-integration.test.ts`\n- `packages/core/tests/integration/git-compatibility.test.ts`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:37.956897254+01:00","updated_at":"2025-12-25T08:22:30.828971756+01:00","closed_at":"2025-12-25T08:22:30.828971756+01:00","dependencies":[{"issue_id":"webrun-vcs-3ob","depends_on_id":"webrun-vcs-5je","type":"blocks","created_at":"2025-12-25T06:56:30.570196322+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-3ob","depends_on_id":"webrun-vcs-rjy","type":"blocks","created_at":"2025-12-25T06:56:30.63106749+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-30h","title":"Phase 4: Verify All Examples Work","description":"Run all example applications to verify they work correctly after updates.\n\nCommands to run:\n- pnpm start in each example app\n- pnpm examples in examples-git\n- Full monorepo build and test\n\nDepends on: Phase 3 (documentation updated)","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:53:23.310988962+01:00","updated_at":"2025-12-25T10:53:23.310988962+01:00","dependencies":[{"issue_id":"webrun-vcs-30h","depends_on_id":"webrun-vcs-pzb","type":"blocks","created_at":"2025-12-25T10:54:44.59433435+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-30h","depends_on_id":"webrun-vcs-gjxq","type":"blocks","created_at":"2025-12-25T10:54:57.213246066+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-30h","depends_on_id":"webrun-vcs-2qdf","type":"blocks","created_at":"2025-12-25T10:54:57.310133486+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-30h","depends_on_id":"webrun-vcs-vvlk","type":"blocks","created_at":"2025-12-25T11:16:39.689825398+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-x5p","title":"Update transport storage adapters","description":"Ensure transport works with any Repository implementation. Remove backend-specific code. JGit refs: Transport.java, UploadPack.java, ReceivePack.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.694862146+01:00","updated_at":"2025-12-22T02:14:03.732499654+01:00","closed_at":"2025-12-22T02:14:03.732499654+01:00","dependencies":[{"issue_id":"webrun-vcs-x5p","depends_on_id":"webrun-vcs-2ye","type":"blocks","created_at":"2025-12-22T00:24:38.91451922+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-57k","title":"Fix FileHandle leak causing deprecation warnings","description":"FileHandle objects not explicitly closed, causing Node.js DEP0137 deprecation warnings in example-vcs-http-roundtrip. Audit file operations in @webrun-vcs/storage-git and ensure proper cleanup with try/finally or using patterns.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-23T09:53:38.289725327+01:00","updated_at":"2025-12-23T22:08:40.550424133+01:00","closed_at":"2025-12-23T22:08:40.550424133+01:00"}
{"id":"webrun-vcs-60n","title":"Update dynamic imports in protocol-v2-handler","description":"Update dynamic import in protocol-v2-handler.ts to use @webrun-vcs/core.\n\n**File to modify:**\n- packages/transport/src/handlers/protocol-v2-handler.ts\n\n**Current code (around line 439):**\n```typescript\nconst { compressBlock, sha1 } = await import(\"@webrun-vcs/utils\");\n```\n\n**New code:**\n```typescript\nconst { compressBlock, sha1 } = await import(\"@webrun-vcs/core\");\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/transport build should succeed\n- Dynamic import should work at runtime","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.570934053+01:00","updated_at":"2025-12-25T10:38:20.710425928+01:00","closed_at":"2025-12-25T10:38:20.710425928+01:00","dependencies":[{"issue_id":"webrun-vcs-60n","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:36:39.227585968+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-fv8","title":"Improve worktree gitignore handling","description":"Support nested .gitignore files, .git/info/exclude, core.excludesFile config. JGit ref: IgnoreNode.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.431818735+01:00","updated_at":"2025-12-22T23:35:45.405663697+01:00","closed_at":"2025-12-22T23:35:45.405663697+01:00","dependencies":[{"issue_id":"webrun-vcs-fv8","depends_on_id":"webrun-vcs-0ff","type":"blocks","created_at":"2025-12-22T00:24:38.672132994+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-lxe","title":"[Phase 6.3] Rename object-storage.suite.ts to raw-storage.suite.ts","description":"Rename packages/testing/src/suites/object-storage.suite.ts to raw-storage.suite.ts. Update to test RawStore interface instead of ObjectStore.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:46.184475459+01:00","updated_at":"2025-12-24T01:03:12.147224202+01:00","closed_at":"2025-12-24T01:03:12.147224202+01:00","dependencies":[{"issue_id":"webrun-vcs-lxe","depends_on_id":"webrun-vcs-4hw","type":"blocks","created_at":"2025-12-23T22:03:27.388175602+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-c9u","title":"Migrate example-vcs-http-roundtrip to high-level APIs","description":"Replace VCS imports with Repository from @webrun-vcs/core. Ensure typed stores for object creation. Includes fixing FileHandle leak. Already uses createGitHttpServer() and transport operations correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T09:53:38.462036172+01:00","updated_at":"2025-12-24T00:30:16.724733559+01:00","closed_at":"2025-12-24T00:30:16.724733559+01:00","dependencies":[{"issue_id":"webrun-vcs-c9u","depends_on_id":"webrun-vcs-57k","type":"blocks","created_at":"2025-12-23T09:54:14.841854412+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-6l9","title":"Update commands core type imports","description":"Update all commands source files to import VCS types from @webrun-vcs/core.\n\n**Files to check and update:**\n- packages/commands/src/git-command.ts\n- packages/commands/src/types.ts\n- packages/commands/src/git.ts\n- packages/commands/src/commands/*.ts (all command files)\n- packages/commands/src/results/*.ts\n\n**Types to ensure come from @webrun-vcs/core:**\n- ObjectId, Ref, SymbolicRef\n- Commit, PersonIdent, Tree, Blob, Tag\n- FileMode, MergeStage\n- BlobStore, TreeStore, CommitStore, RefStore, TagStore\n- Repository, RepositoryConfig\n- isSymbolicRef()\n\n**Note:** Utils imports (bytesToHex, MyersDiff, etc.) remain from @webrun-vcs/utils\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:39:00.588394537+01:00","updated_at":"2025-12-25T11:06:37.388135807+01:00","closed_at":"2025-12-25T11:06:37.388135807+01:00","dependencies":[{"issue_id":"webrun-vcs-6l9","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:38.538655765+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-4hw","title":"[Phase 5.2] Update vcs package exports","description":"Update packages/vcs/src/interfaces/index.ts: Remove 'export * from ./object-store.js'","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T21:58:45.760869701+01:00","updated_at":"2025-12-24T01:02:41.913197072+01:00","closed_at":"2025-12-24T01:02:41.913197072+01:00","dependencies":[{"issue_id":"webrun-vcs-4hw","depends_on_id":"webrun-vcs-ifi","type":"blocks","created_at":"2025-12-23T22:03:23.967885549+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-8vz","title":"Implement PackDirectory class","description":"## Summary\n\nImplement `PackDirectory` class that manages multiple pack files with caching.\n\n## File Location\n\n`packages/core/src/pack/pack-directory.ts`\n\n## Interface\n\n```typescript\nexport interface PackDirectoryOptions {\n  files: FilesApi;\n  basePath: string;\n  maxCachedPacks?: number;\n}\n\nexport class PackDirectory {\n  async scan(): Promise\u003cstring[]\u003e;\n  async getPack(name: string): Promise\u003cPackReader\u003e;\n  async getIndex(name: string): Promise\u003cPackIndex\u003e;\n  async findPack(id: ObjectId): Promise\u003cstring | undefined\u003e;\n  async has(id: ObjectId): Promise\u003cboolean\u003e;\n  async load(id: ObjectId): Promise\u003cUint8Array | undefined\u003e;\n  async addPack(name: string, packData: Uint8Array, indexData: Uint8Array): Promise\u003cvoid\u003e;\n  async removePack(name: string): Promise\u003cvoid\u003e;\n  invalidate(): void;\n  async *listObjects(): AsyncIterable\u003cObjectId\u003e;\n}\n```\n\n## Implementation Details\n\n- Use LRU cache for PackReader instances\n- Query packs in reverse alphabetical order (newer first)\n- Validate pack/index pairs exist together\n- Handle file not found gracefully\n\n## JGit Reference\n\n- [PackDirectory.java](tmp/jgit/org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackDirectory.java)\n\n## Tests Required\n\n- `packages/core/tests/pack/pack-directory.test.ts`\n- Pack enumeration\n- Caching behavior\n- Multi-pack object lookup\n- Add/remove operations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:04.806027502+01:00","updated_at":"2025-12-25T07:47:15.90683244+01:00","closed_at":"2025-12-25T07:47:15.90683244+01:00"}
{"id":"webrun-vcs-9y5","title":"[Phase 1.1] Verify RawStore and VolatileStore location","description":"Verify current locations of RawStore (vcs/binary-storage) and VolatileStore (vcs/interfaces). Decision: Keep in vcs package as low-level storage interfaces.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:58:43.010457759+01:00","updated_at":"2025-12-24T00:40:15.600058523+01:00","closed_at":"2025-12-24T00:40:15.600058523+01:00"}
{"id":"webrun-vcs-5je","title":"Implement PackDeltaStore class","description":"## Summary\n\nImplement `PackDeltaStore` class that fulfills the `DeltaStore` interface using Git pack files.\n\n## File Location\n\n`packages/core/src/delta/pack-delta-store.ts`\n\n## Interface\n\n```typescript\nexport interface PackDeltaStoreOptions {\n  files: FilesApi;\n  basePath: string;\n  volatile: VolatileStore;\n  flushThreshold?: number;\n}\n\nexport class PackDeltaStore implements DeltaStore {\n  // DeltaStore interface\n  async storeDelta(info: DeltaInfo, delta: Delta[]): Promise\u003cnumber\u003e;\n  async loadDelta(targetKey: string): Promise\u003cStoredDelta | undefined\u003e;\n  async isDelta(targetKey: string): Promise\u003cboolean\u003e;\n  async removeDelta(targetKey: string, keepAsBase?: boolean): Promise\u003cboolean\u003e;\n  async getDeltaChainInfo(targetKey: string): Promise\u003cDeltaChainDetails | undefined\u003e;\n  listDeltas(): AsyncIterable\u003cDeltaInfo\u003e;\n\n  // Additional methods\n  async flush(): Promise\u003cvoid\u003e;\n  async close(): Promise\u003cvoid\u003e;\n}\n```\n\n## Dependencies\n\n- `PackDirectory` (webrun-vcs-8vz)\n- `DeltaMetadataIndex` (webrun-vcs-acj)\n- `delta-binary-format` (webrun-vcs-74m)\n- `PendingPack` (webrun-vcs-b81)\n\n## Implementation Flow\n\n**storeDelta():**\n1. Serialize Delta[] to binary format\n2. Add to pending pack\n3. Update metadata index with depth calculation\n4. Check flush threshold\n5. Return compressed size\n\n**loadDelta():**\n1. Check metadata index\n2. Find pack containing object\n3. Read raw delta bytes\n4. Parse binary to Delta[]\n5. Return StoredDelta\n\n## Tests Required\n\n- `packages/core/tests/delta/pack-delta-store.test.ts`\n- Store/load cycle\n- Chain resolution\n- Multi-pack queries\n- Flush behavior","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:37.76257371+01:00","updated_at":"2025-12-25T08:03:09.668355425+01:00","closed_at":"2025-12-25T08:03:09.668355425+01:00","dependencies":[{"issue_id":"webrun-vcs-5je","depends_on_id":"webrun-vcs-8vz","type":"blocks","created_at":"2025-12-25T06:56:30.133202591+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5je","depends_on_id":"webrun-vcs-acj","type":"blocks","created_at":"2025-12-25T06:56:30.194207228+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5je","depends_on_id":"webrun-vcs-74m","type":"blocks","created_at":"2025-12-25T06:56:30.272019528+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5je","depends_on_id":"webrun-vcs-b81","type":"blocks","created_at":"2025-12-25T06:56:35.890160888+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-a1u","title":"Remove @webrun-vcs/utils from transport dependencies","description":"Update transport package.json to remove the @webrun-vcs/utils dependency.\n\n**File to modify:**\n- packages/transport/package.json\n\n**Before:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\",\n  \"@webrun-vcs/utils\": \"workspace:*\"\n}\n```\n\n**After:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\"\n}\n```\n\n**Verification:**\n- pnpm install should succeed\n- pnpm --filter @webrun-vcs/transport build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.68324593+01:00","updated_at":"2025-12-25T10:38:27.118501915+01:00","closed_at":"2025-12-25T10:38:27.118501915+01:00","dependencies":[{"issue_id":"webrun-vcs-a1u","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:36:39.422892428+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-fjo","title":"Migrate transport operations to core","description":"## Overview\n\nRefactor transport operations (clone, fetch, push) to use core interfaces exclusively.\n\n## Files to Migrate/Refactor\n\n**packages/transport/src/operations/**\n- clone.ts - Repository cloning\n- fetch.ts - Fetching refs and objects\n- push.ts - Pushing refs and objects\n\n## Dependencies\n\n- Requires protocol migration complete\n- Requires streams migration complete\n- Requires storage-adapters migration complete\n\n## Tasks\n\n1. Update clone to use core pack/ref interfaces\n2. Update fetch to use core negotiation types\n3. Update push to use core store interfaces\n4. Remove all utils dependencies\n\n## Acceptance Criteria\n\n- [ ] Operations use only core types\n- [ ] Clone creates proper core repository structure\n- [ ] Fetch/Push work with core stores\n- [ ] All operation tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:11:55.39000991+01:00","updated_at":"2025-12-25T08:18:32.130641676+01:00","closed_at":"2025-12-25T08:18:32.130641676+01:00","dependencies":[{"issue_id":"webrun-vcs-fjo","depends_on_id":"webrun-vcs-a24","type":"blocks","created_at":"2025-12-25T08:12:18.694213273+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-fjo","depends_on_id":"webrun-vcs-n9t","type":"blocks","created_at":"2025-12-25T08:12:18.757160187+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-fjo","depends_on_id":"webrun-vcs-ixl","type":"blocks","created_at":"2025-12-25T08:12:18.818422718+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-4rh7","title":"Update example-git-perf imports","description":"Update example-git-perf to remove forbidden dependencies.\n\n**Current dependencies:** vcs, storage-git, utils\n**Target dependencies:** core, commands, utils\n\n**Files to update:**\n- apps/example-git-perf/src/shared/helpers.ts\n- apps/example-git-perf/src/shared/storage.ts\n- apps/example-git-perf/src/steps/*.ts\n- apps/example-git-perf/package.json\n\n**Import changes:**\n```typescript\n// REMOVE\nimport type { ObjectId } from \"@webrun-vcs/vcs\";\nimport { FileMode } from \"@webrun-vcs/vcs\";\nimport { createGitRepository, type GitRepository } from \"@webrun-vcs/storage-git\";\n\n// ADD\nimport type { ObjectId } from \"@webrun-vcs/core\";\nimport { FileMode } from \"@webrun-vcs/core\";\nimport { Git } from \"@webrun-vcs/commands\";\n```\n\n**package.json changes:**\n- REMOVE: @webrun-vcs/vcs, @webrun-vcs/storage-git\n- ADD: @webrun-vcs/core, @webrun-vcs/commands\n\n**Verification:** cd apps/example-git-perf \u0026\u0026 pnpm step:traverse","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:16.560487829+01:00","updated_at":"2025-12-25T11:15:23.33269206+01:00","dependencies":[{"issue_id":"webrun-vcs-4rh7","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.212969929+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-0k3","title":"Migrate store interfaces to core","description":"Move BlobStore, TreeStore, CommitStore, TagStore, RefStore, Repository interfaces to core/src/stores/. JGit refs: lib/Repository.java, lib/ObjectId.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:01.887709134+01:00","updated_at":"2025-12-22T01:05:05.50860437+01:00","closed_at":"2025-12-22T01:05:05.50860437+01:00","dependencies":[{"issue_id":"webrun-vcs-0k3","depends_on_id":"webrun-vcs-x8g","type":"blocks","created_at":"2025-12-22T00:23:55.05229039+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-24f","title":"Reorganize storage-git internal structure","description":"Rename attik.loose/ to loose/. Organize into objects/, pack/, refs/, gc/, delta/, worktree/. JGit structure as reference.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.430533243+01:00","updated_at":"2025-12-22T01:39:53.523704556+01:00","closed_at":"2025-12-22T01:39:53.523704556+01:00","dependencies":[{"issue_id":"webrun-vcs-24f","depends_on_id":"webrun-vcs-5in","type":"blocks","created_at":"2025-12-22T00:24:07.822928799+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-umd","title":"[Phase 4.2] Delete createStreamingStores (deprecated)","description":"Delete packages/storage-git/src/create-streaming-stores.ts (already @deprecated). Remove from index.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:45.336496183+01:00","updated_at":"2025-12-24T00:59:15.335446907+01:00","closed_at":"2025-12-24T00:59:15.335446907+01:00","dependencies":[{"issue_id":"webrun-vcs-umd","depends_on_id":"webrun-vcs-hwp","type":"blocks","created_at":"2025-12-23T22:03:12.885788553+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-0uf","title":"Epic: Consolidate transport and commands to use core exclusively","description":"Refactor transport and commands packages to depend exclusively on core:\n- transport → depends only on core (including FilesApi from files/index.js)\n- commands → depends only on core + transport\n\nNo code moves from transport/commands to core - only:\n1. Expand core exports to include all needed types\n2. Add missing types/interfaces to core as needed\n3. Update imports in transport and commands\n4. Update and improve all associated tests\n\nSee planning/2025-12-25/01-[vcs-refactoring]-transport-commands-core-consolidation.md for detailed plan.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T10:32:48.947184205+01:00","updated_at":"2025-12-25T11:26:47.583718494+01:00","closed_at":"2025-12-25T11:26:47.583718494+01:00","dependencies":[{"issue_id":"webrun-vcs-0uf","depends_on_id":"webrun-vcs-77c","type":"blocks","created_at":"2025-12-25T10:45:11.711640677+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-56u","title":"Replace @webrun-vcs/utils hash imports in transport","description":"Replace all hash utility imports from @webrun-vcs/utils with @webrun-vcs/core.\n\n**Files to modify:**\n- packages/transport/src/handlers/receive-pack-handler.ts\n- packages/transport/src/negotiation/ref-advertiser.ts\n- packages/transport/src/negotiation/push-negotiator.ts\n- packages/transport/src/negotiation/fetch-negotiator.ts\n- packages/transport/src/operations/fetch.ts\n- packages/transport/src/protocol/ack-nak.ts\n\n**Changes for each file:**\nReplace:\n```typescript\nimport { bytesToHex } from \"@webrun-vcs/utils/hash/utils\";\nimport { hexToBytes } from \"@webrun-vcs/utils/hash/utils\";\n```\n\nWith:\n```typescript\nimport { bytesToHex, hexToBytes } from \"@webrun-vcs/core\";\n```\n\n**Verification:**\n- grep -r \"@webrun-vcs/utils/hash\" packages/transport/src should return no results\n- pnpm --filter @webrun-vcs/transport build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.278850647+01:00","updated_at":"2025-12-25T10:38:20.686060711+01:00","closed_at":"2025-12-25T10:38:20.686060711+01:00","dependencies":[{"issue_id":"webrun-vcs-56u","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:36:38.916530537+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-24s","title":"Migrate staging interfaces to core","description":"Move StagingStore, StagingEntry, StagingEdits from vcs/src/interfaces/staging-*.ts to core/src/staging/. JGit ref: dircache/DirCache.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:17.84232571+01:00","updated_at":"2025-12-22T01:09:11.665941275+01:00","closed_at":"2025-12-22T01:09:11.665941275+01:00","dependencies":[{"issue_id":"webrun-vcs-24s","depends_on_id":"webrun-vcs-0k3","type":"blocks","created_at":"2025-12-22T00:23:55.141038269+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-6yv","title":"Update storage-git imports to use core","description":"Replace all @webrun-vcs/vcs interface imports with @webrun-vcs/core. Remove deprecated vcs dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.701671332+01:00","updated_at":"2025-12-22T02:58:24.492244331+01:00","closed_at":"2025-12-22T02:58:24.492244331+01:00","dependencies":[{"issue_id":"webrun-vcs-6yv","depends_on_id":"webrun-vcs-anp","type":"blocks","created_at":"2025-12-22T00:24:17.868066433+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-gg7","title":"Replace @webrun-vcs/worktree imports with core","description":"Replace all imports from @webrun-vcs/worktree with @webrun-vcs/core.\n\n**Files to modify:**\n- packages/commands/src/types.ts\n- packages/commands/src/commands/add-command.ts\n- packages/commands/src/commands/checkout-command.ts\n- packages/commands/src/commands/commit-command.ts\n\n**Current imports to replace:**\n```typescript\nimport type { StagingStore, WorkingTreeIterator } from \"@webrun-vcs/worktree\";\nimport { DeleteStagingEntry, UpdateStagingEntry } from \"@webrun-vcs/worktree\";\n```\n\n**New imports:**\n```typescript\nimport type { StagingStore, WorkingTreeIterator } from \"@webrun-vcs/core\";\nimport { DeleteStagingEntry, UpdateStagingEntry } from \"@webrun-vcs/core\";\n```\n\n**Note:** Combine with existing @webrun-vcs/core imports.\n\n**Verification:**\n- grep -r \"@webrun-vcs/worktree\" packages/commands/src should return no results","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:30.914934491+01:00","updated_at":"2025-12-25T10:41:41.737698282+01:00","closed_at":"2025-12-25T10:41:41.737698282+01:00"}
{"id":"webrun-vcs-lip","title":"[Phase 6.2] Update storage-git delta tests","description":"Update packages/storage-git/tests/delta/*.test.ts: Change mock implementations from ObjectStore to RawStore/PackReader pattern.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:46.033166862+01:00","updated_at":"2025-12-24T01:03:11.982631602+01:00","closed_at":"2025-12-24T01:03:11.982631602+01:00","dependencies":[{"issue_id":"webrun-vcs-lip","depends_on_id":"webrun-vcs-4hw","type":"blocks","created_at":"2025-12-23T22:03:27.267889966+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-anp","title":"Verify FilesApi-only usage in storage-git","description":"Audit all file operations. Replace any direct fs/path calls with FilesApi. Ensure MemFilesApi compatibility for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.614555465+01:00","updated_at":"2025-12-22T02:27:18.195002277+01:00","closed_at":"2025-12-22T02:27:18.195002277+01:00","dependencies":[{"issue_id":"webrun-vcs-anp","depends_on_id":"webrun-vcs-djb","type":"blocks","created_at":"2025-12-22T00:24:17.785445059+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-9lo","title":"Add README documentation to each example app","description":"Each app should have README explaining: what the example demonstrates, which high-level APIs are used, prerequisites and how to run, key patterns shown. Ensure consistent format across all apps.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T09:53:57.132899188+01:00","updated_at":"2025-12-24T00:32:27.659533647+01:00","closed_at":"2025-12-24T00:32:27.659533647+01:00","dependencies":[{"issue_id":"webrun-vcs-9lo","depends_on_id":"webrun-vcs-ppp","type":"blocks","created_at":"2025-12-23T09:54:15.089638199+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-9lo","depends_on_id":"webrun-vcs-u1a","type":"blocks","created_at":"2025-12-23T09:54:15.221623442+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-9lo","depends_on_id":"webrun-vcs-c9u","type":"blocks","created_at":"2025-12-23T09:54:15.324083002+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-9lo","depends_on_id":"webrun-vcs-kgx","type":"blocks","created_at":"2025-12-23T09:54:15.413511718+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-9lo","depends_on_id":"webrun-vcs-3m3","type":"blocks","created_at":"2025-12-23T09:54:15.494510644+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-a0i","title":"[Phase 3.2-TEST] Write unit tests for updated git-repository.ts","description":"Write unit tests for git-repository.ts with new constructor signature. Test creation with RawStore + VolatileStore, verify GitObjectStoreImpl is created correctly, test all repository operations work.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.677810227+01:00","updated_at":"2025-12-24T00:57:29.736443446+01:00","closed_at":"2025-12-24T00:57:29.736443446+01:00","dependencies":[{"issue_id":"webrun-vcs-a0i","depends_on_id":"webrun-vcs-hwp","type":"blocks","created_at":"2025-12-23T22:03:01.518631471+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-2ye","title":"Update transport imports to use core","description":"Replace @webrun-vcs/vcs with @webrun-vcs/core. Update storage adapters to use Repository interface.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.604815051+01:00","updated_at":"2025-12-22T01:45:31.288420519+01:00","closed_at":"2025-12-22T01:45:31.288420519+01:00","dependencies":[{"issue_id":"webrun-vcs-2ye","depends_on_id":"webrun-vcs-4ez","type":"blocks","created_at":"2025-12-22T00:24:38.833558651+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-wm7","title":"Implement binary storage interface tests","description":"## Overview\n\nImplement unit tests for the binary storage interfaces (RawStore, VolatileStore) in packages/core.\n\n## Target Files to Test\n\n| Source File | Interface | Key Methods |\n|-------------|-----------|-------------|\n| binary/raw-store.ts | RawStore | store, load (with range), has, delete, keys, size |\n| binary/volatile-store.ts | VolatileStore | store → VolatileContent |\n\n## Test Files to Create\n\n### packages/core/tests/binary/\n\n**raw-store.test.ts**\n```typescript\ndescribe(\"RawStore interface\", () =\u003e {\n  describe(\"store\", () =\u003e {\n    it(\"should store byte stream by key\")\n    it(\"should handle large streams (\u003e1MB)\")\n    it(\"should overwrite existing content\")\n    it(\"should accept async iterable of Uint8Array\")\n  })\n\n  describe(\"load\", () =\u003e {\n    it(\"should retrieve stored content as async iterable\")\n    it(\"should support offset option for partial reads\")\n    it(\"should support length option for partial reads\")\n    it(\"should support combined offset+length\")\n    it(\"should throw for non-existent key\")\n  })\n\n  describe(\"has\", () =\u003e {\n    it(\"should return true for existing key\")\n    it(\"should return false for missing key\")\n  })\n\n  describe(\"delete\", () =\u003e {\n    it(\"should remove stored content\")\n    it(\"should handle non-existent key gracefully\")\n  })\n\n  describe(\"keys\", () =\u003e {\n    it(\"should iterate all stored keys\")\n    it(\"should return empty iterator when empty\")\n  })\n\n  describe(\"size\", () =\u003e {\n    it(\"should return uncompressed content size\")\n    it(\"should throw for non-existent key\")\n  })\n})\n```\n\n**volatile-store.test.ts** (existing: memory-volatile-store.test.ts)\n```typescript\ndescribe(\"VolatileStore interface\", () =\u003e {\n  describe(\"store\", () =\u003e {\n    it(\"should buffer incoming stream\")\n    it(\"should return VolatileContent handle\")\n  })\n\n  describe(\"VolatileContent\", () =\u003e {\n    it(\"should report correct size after buffering\")\n    it(\"should allow multiple reads of same content\")\n    it(\"should release resources on dispose\")\n  })\n})\n```\n\n## Migration from store-mem\n\nEvaluate [packages/store-mem/tests/binary-storage.test.ts](packages/store-mem/tests/binary-storage.test.ts) (513 lines) for interface-level tests that could be extracted to core.\n\nKey tests to consider:\n- MemRawStore async key-value storage\n- MemDeltaStore delta storage operations\n- Streaming stores interface compliance\n\n## JGit Test References\n\n**ObjectDirectoryTest.java** (8 test methods)\n- Concurrent object insertion to same fan-out directory\n- Pack file discovery during GC\n- IO exception propagation\n- Stale file handle exception suppression\n\n## Key Edge Cases\n\n- Large object storage (\u003e100MB, \u003e1GB)\n- Streaming without loading entire content into memory\n- Concurrent access patterns\n- Memory pressure scenarios\n- Range queries with edge values (offset=0, length=full)\n\n## Acceptance Criteria\n\n- [ ] RawStore interface tests cover all methods\n- [ ] Range query tests verify offset/length behavior\n- [ ] Large stream tests verify memory efficiency\n- [ ] VolatileStore tests verify buffering and cleanup","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T06:52:13.279277549+01:00","updated_at":"2025-12-25T07:33:35.081847411+01:00","closed_at":"2025-12-25T07:33:35.081847411+01:00"}
{"id":"webrun-vcs-5gt","title":"Identify all broken functionalities in apps","description":"Based on verification results, systematically identify and catalog all broken functionalities. Document error messages, stack traces, and specific failures for each affected application.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T08:47:40.253651131+01:00","updated_at":"2025-12-23T09:50:09.628387542+01:00","closed_at":"2025-12-23T09:50:09.628387542+01:00","dependencies":[{"issue_id":"webrun-vcs-5gt","depends_on_id":"webrun-vcs-098","type":"blocks","created_at":"2025-12-23T08:48:26.661048199+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-9le","title":"[Phase 7.1] Refactor DefaultObjectStore in sandbox","description":"Evaluate packages/sandbox/src/base/default-object-store.ts: Delete if unused, or refactor to use RawStore pattern if needed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:58:46.493045768+01:00","updated_at":"2025-12-24T01:03:31.045952244+01:00","closed_at":"2025-12-24T01:03:31.045952244+01:00","dependencies":[{"issue_id":"webrun-vcs-9le","depends_on_id":"webrun-vcs-3b9","type":"blocks","created_at":"2025-12-23T22:03:31.897091727+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-vvlk","title":"Verify no forbidden dependencies in examples","description":"Check that no example has dependencies outside the allowed list.\n\n**Allowed dependencies:**\n- @webrun-vcs/utils\n- @webrun-vcs/core\n- @webrun-vcs/transport\n- @webrun-vcs/commands\n\n**Check command:**\nfor app in apps/*/package.json; do\n  echo \"=== $app ===\"\n  grep -E \"@webrun-vcs/(vcs|storage-git)\" \"$app\" \u0026\u0026 echo \"FORBIDDEN!\" || echo \"OK\"\ndone\n\n**Success criteria:** No forbidden dependencies found in any example app.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:16:32.072243576+01:00","updated_at":"2025-12-25T11:16:32.072243576+01:00","dependencies":[{"issue_id":"webrun-vcs-vvlk","depends_on_id":"webrun-vcs-pzb","type":"blocks","created_at":"2025-12-25T11:16:39.787502818+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-it8","title":"Test RawStoreWithDelta deltify operations","description":"Test delta compression (deltify) functionality.\n\n## Test Cases\n\n### deltify() with single candidate\n- Deltify similar objects\n- Verify delta stored correctly\n- isDelta() returns true after deltify\n- load() returns original content after deltify\n\n### deltify() with multiple candidates\n- Select best compression from multiple candidates\n- Verify best ratio chosen\n\n### deltify() respecting maxRatio\n- Skip deltification when ratio exceeds maxRatio\n- Accept deltification when ratio below threshold\n\n### deltify() respecting minSize\n- Skip small objects (below minSize)\n- Deltify objects above minSize\n\n### deltify() respecting maxChainDepth\n- Allow deltify up to maxChainDepth\n- Reject deltify that would exceed maxChainDepth\n- Chain depth tracking accuracy\n\n### deltify() edge cases\n- Cannot deltify non-existent target\n- Cannot deltify against non-existent base\n- Empty candidate list returns false","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:09:15.634321701+01:00","updated_at":"2025-12-25T10:20:13.132422733+01:00","closed_at":"2025-12-25T10:20:13.132422733+01:00"}
{"id":"webrun-vcs-nf7","title":"Phase 4: Test Improvements","description":"Add comprehensive tests to verify the new import structure works correctly.\n\nKey deliverables:\n1. Add integration tests for import paths\n2. Add type-only import validation tests\n3. Verify no circular dependencies exist\n4. Update test documentation\n\nDepends on: Phase 2 and Phase 3 completion","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:33:33.98522526+01:00","updated_at":"2025-12-25T12:05:34.908767404+01:00","closed_at":"2025-12-25T12:05:34.908767404+01:00","dependencies":[{"issue_id":"webrun-vcs-nf7","depends_on_id":"webrun-vcs-fbm","type":"blocks","created_at":"2025-12-25T10:44:57.763804563+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-nf7","depends_on_id":"webrun-vcs-97g","type":"blocks","created_at":"2025-12-25T10:44:57.957619531+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-nf7","depends_on_id":"webrun-vcs-2o0","type":"blocks","created_at":"2025-12-25T10:45:11.545306282+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-2cy","title":"Implement stream utilities tests","description":"Add comprehensive tests for stream utilities: concat.test.ts, split-stream.test.ts, read-header.test.ts, to-lines.test.ts. Port existing tests from vcs package.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T00:22:01.629419471+01:00","updated_at":"2025-12-22T00:30:25.494587211+01:00","closed_at":"2025-12-22T00:30:25.494587211+01:00","dependencies":[{"issue_id":"webrun-vcs-2cy","depends_on_id":"webrun-vcs-m7h","type":"blocks","created_at":"2025-12-22T00:23:52.210661991+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-igg","title":"Migrate reference store tests from storage-git to core","description":"## Overview\n\nMigrate reference store tests from packages/storage-git/tests/refs/ to packages/core/tests/refs/ and add additional tests based on JGit patterns.\n\n## Files to Migrate\n\n| File | Lines | Description |\n|------|-------|-------------|\n| git-ref-storage.test.ts | 680 | Ref type creation, storage operations, packed refs |\n| refs.test.ts | 485 | HEAD state, ref directory validation, resolution chains |\n| **Total** | **1,165** | |\n\n## Source Files (storage-git)\n\n- [packages/storage-git/tests/refs/git-ref-storage.test.ts](packages/storage-git/tests/refs/git-ref-storage.test.ts)\n- [packages/storage-git/tests/refs/refs.test.ts](packages/storage-git/tests/refs/refs.test.ts)\n\n## Target Directory\n\n`packages/core/tests/refs/`\n\n## Migration Steps\n\n1. Create `packages/core/tests/refs/` directory (if not exists)\n2. Copy test files from storage-git\n3. Update imports to reference core modules\n4. Run tests to verify they pass\n\n## New Tests to Add\n\nBased on JGit's RefDirectoryTest.java (40+ test methods):\n\n**ref-directory.test.ts**\n```typescript\ndescribe(\"RefDirectory\", () =\u003e {\n  describe(\"ref reading\", () =\u003e {\n    it(\"should list empty database\")\n    it(\"should read HEAD reference\")\n    it(\"should handle detached HEAD\")\n    it(\"should resolve deeply nested branches\")\n    it(\"should handle unborn HEAD\")\n  })\n\n  describe(\"loose vs packed refs\", () =\u003e {\n    it(\"should prefer loose ref over packed\")\n    it(\"should discover new loose refs\")\n    it(\"should detect modified loose refs\")\n    it(\"should handle deleted loose refs\")\n  })\n\n  describe(\"packed-refs format\", () =\u003e {\n    it(\"should parse packed-refs file\")\n    it(\"should handle peeled refs annotation\")\n    it(\"should write packed-refs atomically\")\n  })\n})\n```\n\nBased on JGit's RefUpdateTest.java (40+ test methods):\n\n**ref-update.test.ts**\n```typescript\ndescribe(\"RefUpdate\", () =\u003e {\n  describe(\"deletion\", () =\u003e {\n    it(\"should delete loose reference\")\n    it(\"should delete packed reference\")\n    it(\"should cleanup empty directories\")\n    it(\"should handle force deletion\")\n  })\n\n  describe(\"updates\", () =\u003e {\n    it(\"should fast-forward update\")\n    it(\"should handle no-op updates\")\n    it(\"should invalidate cache after update\")\n    it(\"should fail on lock conflict\")\n  })\n\n  describe(\"compare-and-swap\", () =\u003e {\n    it(\"should succeed when expected value matches\")\n    it(\"should fail when expected value differs\")\n    it(\"should handle concurrent updates\")\n  })\n})\n```\n\n## JGit Test References\n\n- `RefDirectoryTest.java` - 40+ test methods for ref file handling\n- `RefUpdateTest.java` - 40+ test methods for ref mutations\n- `PackedRefsTest.java` - Packed refs format tests\n\n## Key Test Scenarios from JGit\n\n- Empty database listing\n- Detached HEAD scenarios\n- Reference versioning support\n- Garbage file filtering\n- Lock file handling\n- Symbolic reference chains\n- Namespace conflicts\n\n## Acceptance Criteria\n\n- [ ] Both test files migrated successfully\n- [ ] Tests pass in CI\n- [ ] RefDirectory tests added for loose/packed precedence\n- [ ] RefUpdate tests added for atomic operations\n- [ ] Compare-and-swap tests added for concurrency","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T06:52:13.1110729+01:00","updated_at":"2025-12-25T07:17:38.137050543+01:00","closed_at":"2025-12-25T07:17:38.137050543+01:00","dependencies":[{"issue_id":"webrun-vcs-igg","depends_on_id":"webrun-vcs-p48","type":"blocks","created_at":"2025-12-25T06:52:35.69592426+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-jpp","title":"Configure TypeScript project references for source-level imports between packages","description":"## Problem\n\nWhen importing one package from another in the monorepo, the IDE resolves imports to compiled JavaScript files instead of TypeScript source files. This causes:\n\n- Poor IDE navigation (Go to Definition goes to .js/.d.ts instead of .ts)\n- Slower feedback loop (need to rebuild after changes)\n- Loss of inline documentation and type inference from source\n\n## Goal\n\nConfigure the monorepo so that during development:\n- IDE \"Go to Definition\" navigates to TypeScript source files\n- TypeScript compiler uses source files for type checking\n- Imports between packages resolve to source, not compiled output\n\n## Implementation Options\n\n### Option 1: TypeScript Project References\n\nUpdate `tsconfig.json` files to use project references:\n\n```json\n// packages/core/tsconfig.json\n{\n  \"compilerOptions\": {\n    \"composite\": true,\n    \"declaration\": true,\n    \"declarationMap\": true\n  }\n}\n\n// packages/storage-git/tsconfig.json\n{\n  \"references\": [\n    { \"path\": \"../core\" }\n  ]\n}\n```\n\n### Option 2: Path Mappings\n\nAdd path mappings in root `tsconfig.json`:\n\n```json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@webrun-vcs/core\": [\"./packages/core/src/index.ts\"],\n      \"@webrun-vcs/core/*\": [\"./packages/core/src/*\"]\n    }\n  }\n}\n```\n\n### Option 3: Package.json exports with typesVersions\n\nUpdate each package's `package.json`:\n\n```json\n{\n  \"exports\": {\n    \".\": {\n      \"types\": \"./src/index.ts\",\n      \"import\": \"./dist/index.js\"\n    }\n  },\n  \"typesVersions\": {\n    \"*\": {\n      \"*\": [\"./src/*\"]\n    }\n  }\n}\n```\n\n## Files to Modify\n\n- `tsconfig.json` (root)\n- `packages/*/tsconfig.json` (each package)\n- `packages/*/package.json` (if using exports approach)\n\n## Acceptance Criteria\n\n- [ ] \"Go to Definition\" on cross-package imports navigates to .ts source\n- [ ] TypeScript errors show in source files, not compiled output\n- [ ] `pnpm build` still produces correct compiled output\n- [ ] `pnpm test` works correctly with source imports\n- [ ] VSCode/IDE provides proper IntelliSense from source files\n\n## References\n\n- [TypeScript Project References](https://www.typescriptlang.org/docs/handbook/project-references.html)\n- [pnpm workspace TypeScript setup](https://pnpm.io/workspaces)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:41:59.198020904+01:00","updated_at":"2025-12-25T07:41:59.198020904+01:00"}
{"id":"webrun-vcs-ub79","title":"Verify core exports all types for examples","description":"Verify @webrun-vcs/core exports all types that examples currently import from @webrun-vcs/vcs.\n\n**Required types from core:**\n- FileMode, ObjectId, ObjectType, ObjectTypeCode\n- PersonIdent, Commit, TreeEntry\n- Repository, CommitStore, TreeStore, BlobStore, TagStore, RefStore\n\n**Verification:**\n```typescript\nimport { FileMode, ObjectId, PersonIdent, ObjectType, Commit, TreeEntry } from \"@webrun-vcs/core\";\n```\n\n**If missing:** Add exports to packages/core/src/index.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:53:42.004825196+01:00","updated_at":"2025-12-25T11:14:44.369567732+01:00","closed_at":"2025-12-25T11:07:58.536837768+01:00"}
{"id":"webrun-vcs-ef4","title":"Epic: Update Example Applications After Core Consolidation","description":"Update all 7 example applications to use ONLY the approved dependencies:\n- @webrun-vcs/utils (hash, compression, diff)\n- @webrun-vcs/core (VCS types, interfaces, stores)\n- @webrun-vcs/transport (HTTP operations)\n- @webrun-vcs/commands (Git high-level API)\n\nDependencies to REMOVE from all examples:\n- @webrun-vcs/vcs → replace with @webrun-vcs/core\n- @webrun-vcs/storage-git → replace with @webrun-vcs/commands (Git class)\n\nSee planning/2025-12-25/02-[vcs-refactoring]-update-example-applications.md","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:52:46.130571206+01:00","updated_at":"2025-12-25T11:14:27.347821296+01:00","dependencies":[{"issue_id":"webrun-vcs-ef4","depends_on_id":"webrun-vcs-30h","type":"blocks","created_at":"2025-12-25T10:54:44.706725269+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-w7f","title":"Transform action plan to beads issues","description":"Convert the approved action plan into granular beads issues. Each fix/update task should become a separate issue with proper dependencies and priorities. Link all issues to the parent epic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T08:47:40.619248292+01:00","updated_at":"2025-12-23T09:54:31.6383543+01:00","closed_at":"2025-12-23T09:54:31.6383543+01:00","dependencies":[{"issue_id":"webrun-vcs-w7f","depends_on_id":"webrun-vcs-5d9","type":"blocks","created_at":"2025-12-23T08:48:27.08102497+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-chv","title":"Review interface JSDoc comments to remove implementation details","description":"Check and update JavaScript documentation for all interfaces in the codebase. Interface docs should describe the purpose and contract, not implementation details.\n\n**Problem:** Current interface docs sometimes mention implementation specifics that may become incorrect if implementations change.\n\n**Example of wrong comment (BlobStore):**\n```typescript\n/**\n * Blob (file content) storage interface\n *\n * Blobs are the simplest Git object type - just raw binary content\n * with no parsing or serialization needed. This interface provides\n * a thin wrapper over GitObjectStore for blob operations.\n */\n```\n\nThe statement 'This interface provides a thin wrapper over GitObjectStore for blob operations' is an implementation detail.\n\n**Good interface docs should:**\n- Describe what the interface represents\n- Explain the purpose and contract of methods\n- Document expected behavior and semantics\n- Avoid mentioning specific implementations or internal structure\n\n**Files to review:**\n- All `*-store.ts` files\n- All files with interface definitions in packages/core/src/","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T00:42:42.628522452+01:00","updated_at":"2025-12-22T01:48:24.955902399+01:00","closed_at":"2025-12-22T01:48:24.955902399+01:00"}
{"id":"webrun-vcs-098","title":"Verify all test applications in apps/ folder","description":"Run and verify all test applications in the apps/ folder: example-git-cycle, example-git-perf, example-git-push, example-pack-gc, examples-git, example-vcs-http-roundtrip, perf-bench. Document which apps work correctly and which have issues.\n\nCreate a detailed diagnostics note in notes/src/ folder documenting all discovered issues, their root causes, and initial analysis. Follow the note naming convention: notes/src/YYYY-MM-DD/CC-[apps-verification]-diagnostics.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T08:47:40.09948373+01:00","updated_at":"2025-12-23T09:50:01.709092015+01:00","closed_at":"2025-12-23T09:50:01.709092015+01:00"}
{"id":"webrun-vcs-o4u","title":"[Phase 2.3] Convert GitPackStorage to PackReader","description":"Refactor packages/storage-git/src/git-pack-storage.ts: Rename class to PackReader, remove 'implements ObjectStore', remove store()/delete() methods that throw errors anyway. New interface: load(), has(), getSize(), list(), refresh().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:43.759838969+01:00","updated_at":"2025-12-24T00:48:03.932345419+01:00","closed_at":"2025-12-24T00:48:03.932345419+01:00","dependencies":[{"issue_id":"webrun-vcs-o4u","depends_on_id":"webrun-vcs-9y5","type":"blocks","created_at":"2025-12-23T22:02:46.128623863+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-o4u","depends_on_id":"webrun-vcs-o1g","type":"blocks","created_at":"2025-12-23T22:02:46.230083846+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-n5n","title":"Update transport storage adapter imports to use core","description":"Update storage adapter files to import from @webrun-vcs/core instead of individual modules.\n\n**Files to modify:**\n- packages/transport/src/storage-adapters/repository-adapter.ts\n- packages/transport/src/storage-adapters/vcs-repository-adapter.ts\n\n**Current imports to replace:**\n```typescript\n// From - importing types individually\nimport { CommitStore, GitObjectStore, Ref, Repository, SymbolicRef, TagStore, TreeStore } from \"@webrun-vcs/core\";\n```\n\n**New imports:**\n```typescript\n// Same imports, but verify they all come from core main export\nimport {\n  CommitStore,\n  GitObjectStore,\n  ObjectTypeCode,\n  ObjectTypeString,\n  Ref,\n  RefStore,\n  RefStoreLocation,\n  RefUpdateResult,\n  Repository,\n  SymbolicRef,\n  TagStore,\n  TreeEntry,\n  TreeStore,\n} from \"@webrun-vcs/core\";\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/transport build should succeed\n- No import errors in these files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.138987167+01:00","updated_at":"2025-12-25T11:01:01.729946768+01:00","closed_at":"2025-12-25T11:01:01.729946768+01:00","dependencies":[{"issue_id":"webrun-vcs-n5n","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:45:38.238550383+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-0vy","title":"Integration test RawStoreWithDelta + PackDeltaStore","description":"Test RawStoreWithDelta with PackDeltaStore as the delta backend.\n\n## Test Cases\n\n### Basic integration\n- Store loose objects\n- Deltify using PackDeltaStore\n- Load deltified objects correctly\n- Undeltify restores to loose\n\n### Pack file handling\n- Delta stored in pack file\n- Delta chain spans multiple packs\n- Multi-pack delta resolution\n\n### Persistence scenarios\n- Store delta, close, reopen, load\n- Delta chain survives restart\n- Metadata index persistence\n\n### Performance scenarios\n- Multiple deltify operations\n- Batch operations with auto-flush\n- Large delta chains\n\n### Real-world patterns\n- Simulate git object storage pattern\n- File versions with incremental deltas\n- Delta chain optimization","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:09:47.361610481+01:00","updated_at":"2025-12-25T10:20:13.171389765+01:00","closed_at":"2025-12-25T10:20:13.171389765+01:00","dependencies":[{"issue_id":"webrun-vcs-0vy","depends_on_id":"webrun-vcs-3q7","type":"blocks","created_at":"2025-12-25T08:10:12.953826382+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0vy","depends_on_id":"webrun-vcs-ddi","type":"blocks","created_at":"2025-12-25T08:10:15.141408075+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-llm","title":"Verify commands package build and tests","description":"Final verification that commands package builds and all tests pass.\n\n**Commands to run:**\n```bash\npnpm --filter @webrun-vcs/commands build\npnpm --filter @webrun-vcs/commands test\npnpm --filter @webrun-vcs/commands lint\n```\n\n**Success criteria:**\n- Build completes without errors\n- All tests pass (23 test files)\n- No lint errors related to imports\n- No references to @webrun-vcs/worktree remain in src/\n\n**Verification:**\n```bash\ngrep -r \"@webrun-vcs/worktree\" packages/commands/src\n```\nShould return no results (utils imports are acceptable).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:39:01.139783018+01:00","updated_at":"2025-12-25T11:26:47.571668762+01:00","closed_at":"2025-12-25T11:26:47.571668762+01:00","dependencies":[{"issue_id":"webrun-vcs-llm","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:38.919945911+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-bzm","title":"Replace @webrun-vcs/utils compression imports in transport","description":"Replace all compression utility imports from @webrun-vcs/utils with @webrun-vcs/core.\n\n**Files to modify:**\n- packages/transport/src/handlers/receive-pack-handler.ts\n- packages/transport/src/handlers/upload-pack-handler.ts\n\n**Changes:**\nReplace:\n```typescript\nimport { decompressBlockPartial } from \"@webrun-vcs/utils\";\nimport { compressBlock, sha1 } from \"@webrun-vcs/utils\";\n```\n\nWith:\n```typescript\nimport { decompressBlockPartial, compressBlock, sha1 } from \"@webrun-vcs/core\";\n```\n\n**Note:** Combine with existing core imports where applicable.\n\n**Verification:**\n- pnpm --filter @webrun-vcs/transport build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.402779647+01:00","updated_at":"2025-12-25T10:38:20.702463397+01:00","closed_at":"2025-12-25T10:38:20.702463397+01:00","dependencies":[{"issue_id":"webrun-vcs-bzm","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:36:39.025082001+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-am3","title":"Fix Unicode path handling in checkout/extraction","description":"Checkout fails to extract files with non-ASCII paths (e.g., Japanese characters). Affects example-git-perf verification. Need to fix encoding handling in path processing - check @webrun-vcs/worktree, @webrun-vcs/storage-git, and @statewalker/webrun-files.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-23T09:53:38.22510914+01:00","updated_at":"2025-12-23T21:58:04.860399737+01:00","closed_at":"2025-12-23T21:58:04.860399737+01:00"}
{"id":"webrun-vcs-44a","title":"[Phase 2.2] Delete GitObjectStorage class","description":"Delete packages/storage-git/src/git-object-storage.ts (wraps ObjectStore for Git blob semantics). Remove export from packages/storage-git/src/index.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:43.505494841+01:00","updated_at":"2025-12-24T00:57:15.919144986+01:00","closed_at":"2025-12-24T00:57:15.919144986+01:00","dependencies":[{"issue_id":"webrun-vcs-44a","depends_on_id":"webrun-vcs-9y5","type":"blocks","created_at":"2025-12-23T22:04:17.090834705+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-44a","depends_on_id":"webrun-vcs-o1g","type":"blocks","created_at":"2025-12-23T22:04:17.265291301+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-tzl","title":"Update commands tests","description":"Update 24 command test files to use core interfaces. Test with multiple Repository backends.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:19.102547218+01:00","updated_at":"2025-12-23T00:53:55.308978246+01:00","closed_at":"2025-12-23T00:53:55.308978246+01:00","dependencies":[{"issue_id":"webrun-vcs-tzl","depends_on_id":"webrun-vcs-d8e","type":"blocks","created_at":"2025-12-22T00:24:46.026226834+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-gjj","title":"Replace @webrun-vcs/utils diff imports in commands","description":"Replace diff utility imports from @webrun-vcs/utils with @webrun-vcs/core.\n\n**File to modify:**\n- packages/commands/src/results/diff-formatter.ts\n\n**Current import:**\n```typescript\nimport { type EditList, MyersDiff, RawText, RawTextComparator } from \"@webrun-vcs/utils\";\n```\n\n**New import:**\n```typescript\nimport { type EditList, MyersDiff, RawText, RawTextComparator } from \"@webrun-vcs/core\";\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.169243026+01:00","updated_at":"2025-12-25T10:41:48.668554031+01:00","closed_at":"2025-12-25T10:41:48.668554031+01:00"}
{"id":"webrun-vcs-zbwl","title":"Determine pack utilities location for examples","description":"Decide where pack file utilities should be accessed from for examples that need low-level pack access (examples-git).\n\n**Options:**\nA) Re-export pack utilities from @webrun-vcs/core\nB) Re-export pack utilities from @webrun-vcs/commands  \nC) Keep examples-git as advanced/internal with storage-git as devDependency\nD) Refactor examples to not need low-level pack access\n\n**Decision criteria:**\n- Which approach best fits the allowed dependencies rule?\n- What level of pack access do examples actually need?\n\n**Output:** Document decision in planning file.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:14:55.890778094+01:00","updated_at":"2025-12-25T11:14:55.890778094+01:00"}
{"id":"webrun-vcs-n9t","title":"Migrate transport streams module to core","description":"## Overview\n\nMove transport stream interfaces to packages/core or refactor to use only core types.\n\n## Files to Migrate/Refactor\n\n**packages/transport/src/streams/**\n- git-stream.ts - Git protocol stream handling\n- pack-receiver.ts - Receive and process pack data\n- progress-reporter.ts - Progress reporting for operations\n- protocol-session.ts - Protocol session management\n\n## Tasks\n\n1. Move stream interfaces to core\n2. Ensure pack-receiver uses core pack types\n3. Update progress-reporter to use core interfaces\n4. Refactor protocol-session for core compatibility\n\n## Dependencies\n\n- Requires core pack module to be complete\n- Uses core binary streaming interfaces\n\n## Acceptance Criteria\n\n- [ ] Stream interfaces defined in core\n- [ ] Pack receiver uses core PackReader/PackIndexer\n- [ ] No external utility dependencies\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:11:55.082836407+01:00","updated_at":"2025-12-25T08:18:31.999511181+01:00","closed_at":"2025-12-25T08:18:31.999511181+01:00","dependencies":[{"issue_id":"webrun-vcs-n9t","depends_on_id":"webrun-vcs-a24","type":"blocks","created_at":"2025-12-25T08:12:18.626770122+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-z86","title":"Export WorkingTreeIterator interface from core","description":"Export the WorkingTreeIterator interface from core's worktree module.\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\nAdd:\n```typescript\nexport * from \"./worktree/index.js\";\n```\n\nThis exports:\n- WorkingTreeIterator interface\n- WorkingTreeEntry type\n- WorkingTreeIteratorOptions type\n\n**Verification:**\n- Import { WorkingTreeIterator } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.820977035+01:00","updated_at":"2025-12-25T10:50:38.728447625+01:00","closed_at":"2025-12-25T10:50:38.728447625+01:00"}
{"id":"webrun-vcs-2ol","title":"Test RawStoreWithDelta keys() enumeration across loose and delta","description":"Test keys() enumeration combining loose and deltified objects.\n\n## Test Cases\n\n### keys() with mixed storage\n- Enumerate keys from loose objects only\n- Enumerate keys from delta objects only\n- Enumerate keys from both loose and delta\n- No duplicate keys in output\n\n### keys() ordering and completeness\n- All loose keys included\n- All delta target keys included\n- Deleted keys not included\n\n### keys() after modifications\n- New object appears in keys()\n- Deltified object still appears (not duplicate)\n- Undeltified object still appears (not duplicate)\n- Deleted object disappears\n\n### Edge cases\n- Empty store\n- Store with only delta objects (no loose)\n- Same object in both loose and delta form","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:09:47.095939+01:00","updated_at":"2025-12-25T10:20:13.157360376+01:00","closed_at":"2025-12-25T10:20:13.157360376+01:00"}
{"id":"webrun-vcs-nlt","title":"[Phase 2.4] Refactor GitDeltaObjectStorage to DeltaStorage","description":"Refactor packages/storage-git/src/git-delta-object-storage.ts to use RawStore for loose objects and PackReader for pack files. Constructor takes (looseStore: RawStore, packReader: PackReader, volatileStore: VolatileStore).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.043217798+01:00","updated_at":"2025-12-24T00:48:03.935960109+01:00","closed_at":"2025-12-24T00:48:03.935960109+01:00","dependencies":[{"issue_id":"webrun-vcs-nlt","depends_on_id":"webrun-vcs-9y5","type":"blocks","created_at":"2025-12-23T22:02:46.313744845+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-nlt","depends_on_id":"webrun-vcs-o1g","type":"blocks","created_at":"2025-12-23T22:02:46.39982019+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-7rw","title":"Add staging conflict utilities","description":"Conflict detection (same path, different stages) and resolution helpers. Support merge conflict markers.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.761478234+01:00","updated_at":"2025-12-22T22:42:01.659678314+01:00","closed_at":"2025-12-22T22:42:01.659678314+01:00","dependencies":[{"issue_id":"webrun-vcs-7rw","depends_on_id":"webrun-vcs-17i","type":"blocks","created_at":"2025-12-22T00:24:28.880664112+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-acj","title":"Implement DeltaMetadataIndex class","description":"## Summary\n\nImplement `DeltaMetadataIndex` class that tracks delta relationships for fast lookups.\n\n## File Location\n\n`packages/core/src/delta/delta-metadata-index.ts`\n\n## Interface\n\n```typescript\nexport interface DeltaMetadata {\n  baseKey: string;\n  packName: string;\n  offset: number;\n  depth: number;\n  compressedSize: number;\n  originalSize: number;\n}\n\nexport class DeltaMetadataIndex {\n  isDelta(targetKey: string): boolean;\n  getMetadata(targetKey: string): DeltaMetadata | undefined;\n  setEntry(targetKey: string, metadata: DeltaMetadata): void;\n  removeEntry(targetKey: string): void;\n  entries(): IterableIterator\u003c[string, DeltaMetadata]\u003e;\n  async save(): Promise\u003cvoid\u003e;\n  async load(): Promise\u003cvoid\u003e;\n  async rebuild(packDir: PackDirectory): Promise\u003cvoid\u003e;\n}\n```\n\n## Storage Format\n\n```json\n{\n  \"version\": 1,\n  \"entries\": {\n    \"\u003ctargetKey\u003e\": {\n      \"baseKey\": \"\u003cbase object id\u003e\",\n      \"packName\": \"\u003cpack file name\u003e\",\n      \"offset\": 1234,\n      \"depth\": 2,\n      \"compressedSize\": 567,\n      \"originalSize\": 2048\n    }\n  }\n}\n```\n\n## Implementation Details\n\n- Keep entries in memory Map for fast lookups\n- Debounced auto-save on modifications\n- Rebuild capability by scanning pack files\n- Handle missing/corrupted index gracefully\n\n## Tests Required\n\n- `packages/core/tests/delta/delta-metadata-index.test.ts`\n- Entry CRUD operations\n- Persistence (save/load)\n- Rebuild from packs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:04.936215659+01:00","updated_at":"2025-12-25T07:50:01.729627183+01:00","closed_at":"2025-12-25T07:50:01.729627183+01:00"}
{"id":"webrun-vcs-u1a","title":"Migrate example-git-push to high-level APIs","description":"Replace VCS imports with Repository from @webrun-vcs/core. App already uses Transport API correctly. Ensure typed stores for blob/tree/commit creation. Consider using Porcelaine Git.wrap().push() for higher abstraction.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T09:53:38.405030908+01:00","updated_at":"2025-12-23T22:31:16.962764657+01:00","closed_at":"2025-12-23T22:31:16.962764657+01:00"}
{"id":"webrun-vcs-0tq","title":"Verify transport package build and tests","description":"Final verification that transport package builds and all tests pass.\n\n**Commands to run:**\n```bash\npnpm --filter @webrun-vcs/transport build\npnpm --filter @webrun-vcs/transport test\npnpm --filter @webrun-vcs/transport lint\n```\n\n**Success criteria:**\n- Build completes without errors\n- All tests pass\n- No lint errors related to imports\n- No references to @webrun-vcs/utils remain in src/\n\n**Verification:**\n```bash\ngrep -r \"@webrun-vcs/utils\" packages/transport/src\n```\nShould return no results.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.978505948+01:00","updated_at":"2025-12-25T11:01:01.737825412+01:00","closed_at":"2025-12-25T11:01:01.737825412+01:00","dependencies":[{"issue_id":"webrun-vcs-0tq","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:45:38.440418994+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-2o0","title":"Phase 3: Update Commands Package","description":"Update commands package to import from @webrun-vcs/core and @webrun-vcs/transport only.\n\nKey deliverables:\n1. Update core type imports throughout commands\n2. Replace @webrun-vcs/worktree imports with core\n3. Replace @webrun-vcs/utils hash imports with core\n4. Replace @webrun-vcs/utils diff imports with core\n5. Remove @webrun-vcs/utils and @webrun-vcs/worktree from package.json\n6. Update all commands tests to use new imports\n7. Verify build and all tests pass\n\nDepends on: Phase 1 and Phase 2 completion","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T10:33:33.860691015+01:00","updated_at":"2025-12-25T11:08:41.734525496+01:00","closed_at":"2025-12-25T11:08:41.734525496+01:00","dependencies":[{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-7xm","type":"blocks","created_at":"2025-12-25T10:37:06.244765103+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-gg7","type":"blocks","created_at":"2025-12-25T10:37:06.413224976+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-clm","type":"blocks","created_at":"2025-12-25T10:37:06.546115325+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-gjj","type":"blocks","created_at":"2025-12-25T10:37:06.672966548+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-dlq","type":"blocks","created_at":"2025-12-25T10:37:06.825015725+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-hx1","type":"blocks","created_at":"2025-12-25T10:37:06.917358427+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-abs","type":"blocks","created_at":"2025-12-25T10:37:07.046669965+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-6l9","type":"blocks","created_at":"2025-12-25T10:44:36.841123667+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-cb9","type":"blocks","created_at":"2025-12-25T10:44:36.982440796+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-q45","type":"blocks","created_at":"2025-12-25T10:44:37.360378973+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-llm","type":"blocks","created_at":"2025-12-25T10:44:37.49185032+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-78t","type":"blocks","created_at":"2025-12-25T10:44:44.789691545+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2o0","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:11.466005823+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-p2i","title":"Test RawStoreWithDelta edge cases and error handling","description":"Test edge cases and error handling in RawStoreWithDelta.\n\n## Test Cases\n\n### Empty objects\n- Store empty content\n- Deltify empty object (should skip)\n- Load empty deltified object\n\n### Large objects\n- Store 10MB+ objects\n- Deltify large similar objects\n- Delta chain with large objects\n\n### Error handling\n- Load non-existent object throws\n- Broken delta chain (missing base) throws\n- Invalid delta data handling\n\n### Chain depth limits\n- Enforce maxChainDepth\n- Deep chain performance\n- Chain too deep is rejected\n\n### Concurrent operations\n- Concurrent stores\n- Concurrent deltify\n- Store while loading\n\n### Object state transitions\n- Loose → Delta → Loose (round-trip)\n- Multiple deltify attempts (best wins)\n- Delete deltified object\n- Delete base of delta chain\n\n### Custom compute strategy\n- Custom DeltaComputeStrategy works\n- Strategy returning undefined skips delta\n- Strategy errors handled gracefully","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:09:47.467372138+01:00","updated_at":"2025-12-25T10:20:13.164276738+01:00","closed_at":"2025-12-25T10:20:13.164276738+01:00"}
{"id":"webrun-vcs-hx1","title":"Update commands test infrastructure imports","description":"Update test helper files and all test files to use new import paths.\n\n**Files to update:**\n- packages/commands/tests/test-helper.ts\n- packages/commands/tests/backend-factories.ts\n- packages/commands/tests/transport-test-helper.ts\n- packages/commands/tests/*.test.ts (all test files)\n\n**Implementation:**\n1. Update test-helper.ts imports to use @webrun-vcs/core for types\n2. Update backend-factories.ts if it imports from utils/worktree\n3. Update transport-test-helper.ts for transport-related imports\n4. Search and replace in all test files\n\n**Note:** store-mem, store-sql, storage-git imports remain as they are dev dependencies for testing.\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands test should pass all tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.467569563+01:00","updated_at":"2025-12-25T10:41:41.732334365+01:00","closed_at":"2025-12-25T10:41:41.732334365+01:00"}
{"id":"webrun-vcs-0ff","title":"Update worktree imports to use core","description":"Replace @webrun-vcs/vcs imports with @webrun-vcs/core. Add @webrun-vcs/staging dependency.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.93157887+01:00","updated_at":"2025-12-22T22:59:56.017419758+01:00","closed_at":"2025-12-22T22:59:56.017419758+01:00","dependencies":[{"issue_id":"webrun-vcs-0ff","depends_on_id":"webrun-vcs-53w","type":"blocks","created_at":"2025-12-22T00:24:29.042996865+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-3r2","title":"Write diagnostics note for apps issues","description":"Create a detailed diagnostics note in notes/src/ folder documenting all discovered issues, their root causes, and initial analysis. Follow the note naming convention: notes/src/YYYY-MM-DD/CC-[apps-verification]-diagnostics.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T08:48:06.669443084+01:00","updated_at":"2025-12-23T09:50:18.485905378+01:00","closed_at":"2025-12-23T09:50:18.485905378+01:00","dependencies":[{"issue_id":"webrun-vcs-3r2","depends_on_id":"webrun-vcs-5gt","type":"blocks","created_at":"2025-12-23T08:48:26.803121052+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-51v","title":"Migrate format serializers to core","description":"Move blob, tree, commit, tag format handlers and object-header parsing from vcs/src/format/ to core/src/format/. Use AsyncIterable\u003cUint8Array\u003e streaming API.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:17.928735903+01:00","updated_at":"2025-12-22T01:13:44.25362564+01:00","closed_at":"2025-12-22T01:13:44.25362564+01:00","dependencies":[{"issue_id":"webrun-vcs-51v","depends_on_id":"webrun-vcs-24s","type":"blocks","created_at":"2025-12-22T00:24:07.373036382+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-abs","title":"Verify commands package build and tests","description":"Final verification that commands package builds and all tests pass.\n\n**Commands to run:**\n```bash\npnpm --filter @webrun-vcs/commands build\npnpm --filter @webrun-vcs/commands test\npnpm --filter @webrun-vcs/commands lint\n```\n\n**Success criteria:**\n- Build completes without errors\n- All tests pass (23 test files)\n- No lint errors related to imports\n- No references to @webrun-vcs/utils or @webrun-vcs/worktree remain in src/\n\n**Verification:**\n```bash\ngrep -r \"@webrun-vcs/utils\" packages/commands/src\ngrep -r \"@webrun-vcs/worktree\" packages/commands/src\n```\nBoth should return no results.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.637294073+01:00","updated_at":"2025-12-25T10:41:41.721918385+01:00","closed_at":"2025-12-25T10:41:41.721918385+01:00"}
{"id":"webrun-vcs-1oe","title":"Update package documentation","description":"Update README and documentation to reflect new dependency structure.\n\n**Files to update:**\n- packages/transport/README.md (if exists)\n- packages/commands/README.md (if exists)\n- Any JSDoc comments referencing old import paths\n\n**Documentation updates:**\n1. Document that transport depends only on core\n2. Document that commands depends on core + transport\n3. Update any import examples in documentation\n4. Note the re-exported utilities in core (hash, compression, diff)\n\n**Verification:**\n- Documentation accurately reflects current package structure","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T10:36:32.727212246+01:00","updated_at":"2025-12-25T10:41:41.745470595+01:00","closed_at":"2025-12-25T10:41:41.745470595+01:00"}
{"id":"webrun-vcs-sco","title":"Phase 2: Update Transport Package","description":"Update transport package to import exclusively from @webrun-vcs/core.\n\nKey deliverables:\n1. Update storage adapter imports to use core\n2. Replace @webrun-vcs/utils hash imports with core re-exports\n3. Replace @webrun-vcs/utils compression imports with core re-exports\n4. Update dynamic imports in protocol-v2-handler.ts\n5. Remove @webrun-vcs/utils from package.json dependencies\n6. Update all transport tests to use new imports\n7. Verify build and all tests pass\n\nDepends on: Phase 1 completion","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T10:33:33.737956219+01:00","updated_at":"2025-12-25T11:01:01.741728217+01:00","closed_at":"2025-12-25T11:01:01.741728217+01:00","dependencies":[{"issue_id":"webrun-vcs-sco","depends_on_id":"webrun-vcs-a42","type":"blocks","created_at":"2025-12-25T10:44:36.400507881+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-sco","depends_on_id":"webrun-vcs-0tq","type":"blocks","created_at":"2025-12-25T10:44:36.646753899+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-sco","depends_on_id":"webrun-vcs-n5n","type":"blocks","created_at":"2025-12-25T10:44:44.660117745+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-sco","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:45:11.398346245+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-4ez","title":"Migrate core tests","description":"Port format and interface tests from vcs/tests/ to core/tests/. Ensure all format serializers have comprehensive test coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:18.01529414+01:00","updated_at":"2025-12-22T01:17:53.337837858+01:00","closed_at":"2025-12-22T01:17:53.337837858+01:00","dependencies":[{"issue_id":"webrun-vcs-4ez","depends_on_id":"webrun-vcs-51v","type":"blocks","created_at":"2025-12-22T00:24:07.456539695+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-abu","title":"[Phase 4.3] Verify store-mem, store-sql, store-kv have no ObjectStore deps","description":"Verify packages use new pattern (MemRawStore, SqlRawStore, KvRawStore) with no ObjectStore dependencies.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:58:45.459293321+01:00","updated_at":"2025-12-24T00:59:15.341579499+01:00","closed_at":"2025-12-24T00:59:15.341579499+01:00","dependencies":[{"issue_id":"webrun-vcs-abu","depends_on_id":"webrun-vcs-9b3","type":"blocks","created_at":"2025-12-23T22:03:12.980120816+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-ret","title":"Move delta compression to storage-git","description":"Move vcs/src/delta-compression/ to storage-git/src/delta/. JGit refs: DeltaEncoder.java, DeltaIndex.java, DeltaWindow.java, DeltaCache.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:18.183225717+01:00","updated_at":"2025-12-22T01:38:24.837781513+01:00","closed_at":"2025-12-22T01:38:24.837781513+01:00","dependencies":[{"issue_id":"webrun-vcs-ret","depends_on_id":"webrun-vcs-5in","type":"blocks","created_at":"2025-12-22T00:24:07.61468489+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-i6u","title":"Update package documentation","description":"Update README and documentation to reflect new dependency structure.\n\n**Files to check/update:**\n- packages/transport/README.md (if exists)\n- packages/commands/README.md (if exists)\n- Any JSDoc comments referencing old import paths\n\n**Documentation updates:**\n1. Document that transport depends on core + utils\n2. Document that commands depends on core + transport + utils\n3. Update any import examples in documentation\n\n**Verification:**\n- Documentation accurately reflects current package structure","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T10:41:04.359050609+01:00","updated_at":"2025-12-25T12:06:13.26593212+01:00","closed_at":"2025-12-25T12:06:13.26593212+01:00","dependencies":[{"issue_id":"webrun-vcs-i6u","depends_on_id":"webrun-vcs-nf7","type":"blocks","created_at":"2025-12-25T10:45:39.302000898+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-0zlp","title":"Phase 2: Update Example Applications","description":"Update all 7 example applications to remove forbidden dependencies.\n\n**For each example:**\n1. Replace @webrun-vcs/vcs imports with @webrun-vcs/core\n2. Replace @webrun-vcs/storage-git imports with @webrun-vcs/commands (Git class)\n3. Update package.json to remove vcs and storage-git dependencies\n4. Add core and commands dependencies\n5. Refactor code to use Git high-level API\n\n**Target dependencies for all examples:**\n- @webrun-vcs/utils (if needed)\n- @webrun-vcs/core (for types)\n- @webrun-vcs/transport (if needed for HTTP)\n- @webrun-vcs/commands (for Git operations)","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:53:29.911310414+01:00","updated_at":"2025-12-25T11:15:06.531241919+01:00","dependencies":[{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:54:44.340955359+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-lhl6","type":"blocks","created_at":"2025-12-25T10:54:56.420839043+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-4rh7","type":"blocks","created_at":"2025-12-25T10:54:56.546909725+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-b7fj","type":"blocks","created_at":"2025-12-25T10:54:56.628713285+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-40at","type":"blocks","created_at":"2025-12-25T10:54:56.699134713+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-o055","type":"blocks","created_at":"2025-12-25T10:54:56.769015552+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-dhvn","type":"blocks","created_at":"2025-12-25T10:54:56.837550207+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-0zlp","depends_on_id":"webrun-vcs-ljw6","type":"blocks","created_at":"2025-12-25T10:54:56.919153352+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-3q7","title":"Test RawStoreWithDelta loose object operations","description":"Test RawStoreWithDelta when using loose (non-deltified) objects.\n\n## Test Cases\n\n### store() method\n- Store single object and verify returned size\n- Store multiple objects with different keys\n- Store empty content\n- Store large content (1MB+)\n- Overwrite existing key\n\n### load() method\n- Load existing object\n- Load with offset\n- Load with length\n- Load with offset + length\n- Throw on non-existent key\n\n### has() method\n- Returns true for existing loose object\n- Returns false for non-existent object\n\n### delete() method\n- Delete existing loose object\n- Delete returns false for non-existent object\n- Verify object gone after delete\n\n### keys() method\n- Empty store returns no keys\n- Returns all stored keys\n- Doesn't include deleted keys\n\n### size() method\n- Returns correct size for loose object\n- Returns -1 for non-existent object","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:09:15.512879917+01:00","updated_at":"2025-12-25T10:20:13.12225013+01:00","closed_at":"2025-12-25T10:20:13.12225013+01:00"}
{"id":"webrun-vcs-cb9","title":"Replace @webrun-vcs/worktree imports with core","description":"Replace all imports from @webrun-vcs/worktree with @webrun-vcs/core.\n\n**Files to modify:**\n- packages/commands/src/types.ts\n- packages/commands/src/commands/add-command.ts\n- packages/commands/src/commands/checkout-command.ts\n- packages/commands/src/commands/commit-command.ts\n\n**Current imports to replace:**\n```typescript\nimport type { StagingStore, WorkingTreeIterator } from \"@webrun-vcs/worktree\";\nimport { DeleteStagingEntry, UpdateStagingEntry } from \"@webrun-vcs/worktree\";\n```\n\n**New imports:**\n```typescript\nimport type { StagingStore, WorkingTreeIterator } from \"@webrun-vcs/core\";\nimport { DeleteStagingEntry, UpdateStagingEntry } from \"@webrun-vcs/core\";\n```\n\n**Prerequisite:** Verify core exports these types first (Task 1.3)\n\n**Verification:**\n- grep -r \"@webrun-vcs/worktree\" packages/commands/src should return no results","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:39:00.727133942+01:00","updated_at":"2025-12-25T11:06:37.398888831+01:00","closed_at":"2025-12-25T11:06:37.398888831+01:00","dependencies":[{"issue_id":"webrun-vcs-cb9","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:38.639537736+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-hol","title":"Update transport tests","description":"Update 22+ transport test files to use core interfaces. Test with different Repository backends.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.77978992+01:00","updated_at":"2025-12-22T23:45:18.076252213+01:00","closed_at":"2025-12-22T23:45:18.076252213+01:00","dependencies":[{"issue_id":"webrun-vcs-hol","depends_on_id":"webrun-vcs-x5p","type":"blocks","created_at":"2025-12-22T00:24:38.995527408+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-p48","title":"Create shared test infrastructure (mocks, helpers)","description":"## Overview\n\nCreate shared test infrastructure that will be used across all core module tests.\n\n## Files to Create\n\n### packages/core/tests/mocks/\n\n**mock-raw-store.ts**\n- Implements RawStore interface with in-memory Map\n- Methods: store, load, has, delete, keys, size\n- Support for range queries (offset/length)\n\n**mock-delta-store.ts**\n- Implements DeltaStore interface with in-memory Map\n- Methods: storeDelta, loadDelta, isDelta, removeDelta, getDeltaChainInfo, listDeltas\n\n**mock-commit-store.ts**\n- Implements CommitStore interface for testing commit graphs\n- Predefined commit graph builders for testing ancestry\n\n### packages/core/tests/helpers/\n\n**test-data-generators.ts**\n```typescript\nexport function randomBytes(size: number): Uint8Array\nexport function randomCommitGraph(depth: number, width: number): CommitGraph\nexport function randomTreeEntries(count: number): TreeEntry[]\n```\n\n**assertion-helpers.ts**\n```typescript\nexport function assertDeltaApplies(base: Uint8Array, delta: Delta, expected: Uint8Array)\nexport function assertPackRoundTrip(objects: GitObject[])\nexport function assertRefResolution(store: RefStore, name: string, expected: ObjectId)\n```\n\n## JGit Reference\n\nKey patterns from JGit test infrastructure:\n- TestRepository\u003cT\u003e: Fluent API for repo manipulation\n- BranchBuilder: Commit graph building\n- TestRng: Reproducible random data (seeded RNG)\n\n## Acceptance Criteria\n\n- [ ] All mock classes implement full interfaces\n- [ ] Test data generators create valid Git objects\n- [ ] Assertion helpers provide clear error messages\n- [ ] Documentation with usage examples","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:52:13.443649235+01:00","updated_at":"2025-12-25T07:13:06.521832329+01:00","closed_at":"2025-12-25T07:13:06.521832329+01:00"}
{"id":"webrun-vcs-u35","title":"Remove unused package dependencies","description":"Audit and remove any unused dependencies after refactoring.\n\n**Packages to check:**\n- packages/transport/package.json\n- packages/commands/package.json\n\n**Implementation:**\n1. Run depcheck or similar tool on each package\n2. Verify @webrun-vcs/utils is removed from transport\n3. Verify @webrun-vcs/utils and @webrun-vcs/worktree are removed from commands\n4. Check for any other unused dependencies\n\n**Verification:**\n- pnpm install succeeds\n- pnpm build succeeds for all packages","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:32.459464281+01:00","updated_at":"2025-12-25T10:41:48.688949338+01:00","closed_at":"2025-12-25T10:41:48.688949338+01:00"}
{"id":"webrun-vcs-0x2","title":"Export store interfaces from core index","description":"Update packages/core/src/index.ts to export all store interfaces.\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\nAdd exports for:\n```typescript\n// Blob store\nexport * from \"./blob/blob-store.js\";\n\n// Commits module (includes CommitStore, BlobStore from blob, GitObjectStore)\nexport * from \"./commits/index.js\";\n\n// Trees module\nexport * from \"./trees/index.js\";\n\n// Tags module  \nexport * from \"./tags/index.js\";\n\n// Objects (ObjectType, ObjectTypeCode, ObjectTypeString)\nexport * from \"./objects/object-types.js\";\n```\n\n**Verification:**\n- Run: pnpm --filter @webrun-vcs/core build\n- Verify types are accessible in build output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:30.882125478+01:00","updated_at":"2025-12-25T10:50:38.709281398+01:00","closed_at":"2025-12-25T10:50:38.709281398+01:00"}
{"id":"webrun-vcs-yni","title":"Move worktree functionality to core","description":"## Overview\n\nMove the worktree package functionality into packages/core to eliminate commands dependency on worktree.\n\n## Current packages/worktree\n\nAnalyze and migrate worktree functionality to core.\n\n## Files to Consider\n\n**packages/worktree/src/**\n- Working tree operations\n- File system integration\n- Index/staging interaction\n\n## Tasks\n\n1. Analyze worktree package contents\n2. Identify what belongs in core\n3. Move working-tree-iterator and related code\n4. Update all imports across monorepo\n5. Deprecate or remove packages/worktree\n\n## Core Location\n\nMove to `packages/core/src/worktree/` (already exists partially)\n\n## Acceptance Criteria\n\n- [ ] Worktree functionality available from core\n- [ ] Commands can import from core instead\n- [ ] packages/worktree deprecated or removed\n- [ ] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:11:55.692578274+01:00","updated_at":"2025-12-25T08:18:32.337422277+01:00","closed_at":"2025-12-25T08:18:32.337422277+01:00"}
{"id":"webrun-vcs-exw","title":"Add transport tests to core","description":"## Overview\n\nAfter migrating transport to use core, add comprehensive transport tests to packages/core.\n\n## Tests to Add/Migrate\n\nBased on deleted tests from git status:\n- ack-nak.test.ts\n- capabilities.test.ts\n- git-http-server.test.ts\n- git-stream.test.ts\n- malformed-input.test.ts\n- negotiation-state.test.ts\n- object-filtering.test.ts\n- pkt-line-codec.test.ts\n- progress-reporter.test.ts\n- protocol-session.test.ts\n- protocol-v2-handler.test.ts\n- receive-pack-handler.test.ts\n- ref-advertiser.test.ts\n- refspec.test.ts\n- shallow-negotiation.test.ts\n- sideband.test.ts\n- storage-adapter.test.ts\n- tag-chain-handling.test.ts\n- unicode-ref-names.test.ts\n- upload-pack-handler.test.ts\n- uri.test.ts\n- vcs-repository-adapter.test.ts\n\n## Tasks\n\n1. Create packages/core/tests/transport/ directory\n2. Migrate tests from transport package\n3. Update imports for core modules\n4. Ensure all tests pass\n\n## Acceptance Criteria\n\n- [ ] All transport tests migrated to core\n- [ ] Tests use core interfaces\n- [ ] 80%+ coverage for transport modules\n- [ ] CI passes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:11:55.815764279+01:00","updated_at":"2025-12-25T08:18:32.419310047+01:00","closed_at":"2025-12-25T08:18:32.419310047+01:00","dependencies":[{"issue_id":"webrun-vcs-exw","depends_on_id":"webrun-vcs-n9t","type":"blocks","created_at":"2025-12-25T08:12:25.671120118+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-exw","depends_on_id":"webrun-vcs-ixl","type":"blocks","created_at":"2025-12-25T08:12:25.744242354+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-exw","depends_on_id":"webrun-vcs-fjo","type":"blocks","created_at":"2025-12-25T08:12:25.80613487+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-exw","depends_on_id":"webrun-vcs-5ne","type":"blocks","created_at":"2025-12-25T08:12:25.868361328+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-exw","depends_on_id":"webrun-vcs-a24","type":"blocks","created_at":"2025-12-25T08:12:29.69391649+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-gjxq","title":"Run all example applications","description":"Run all example applications to verify they work correctly with new dependencies.\n\n**Validation for each example:**\n\n1. **example-git-cycle** - Full Git workflow demo\n   - Run: cd apps/example-git-cycle \u0026\u0026 pnpm start\n   - Verify: Creates repo, commits, branches work correctly\n   - Expected: All 8 steps complete without errors\n\n2. **example-git-perf** - Performance benchmarks\n   - Run: cd apps/example-git-perf \u0026\u0026 pnpm step:traverse\n   - Verify: Can traverse commit history, measure performance\n   - Expected: Performance metrics displayed\n\n3. **example-git-push** - Clone/push operations\n   - Run: cd apps/example-git-push \u0026\u0026 pnpm start\n   - Verify: HTTP server starts, clone and push work\n   - Expected: Changes pushed and verified with native git\n\n4. **example-pack-gc** - Garbage collection demo\n   - Run: cd apps/example-pack-gc \u0026\u0026 pnpm start\n   - Verify: GC packs objects, native git fsck passes\n   - Expected: Pack files created, loose objects cleaned\n\n5. **example-vcs-http-roundtrip** - HTTP protocol demo\n   - Run: cd apps/example-vcs-http-roundtrip \u0026\u0026 pnpm start\n   - Verify: Full HTTP roundtrip without native git\n   - Expected: Clone/push via HTTP protocol works\n\n6. **examples-git** - Pack file examples\n   - Run: cd apps/examples-git \u0026\u0026 pnpm examples\n   - Verify: All 6 sub-examples complete\n   - Expected: No errors, pack operations work\n\n7. **perf-bench** - Benchmarks\n   - Run: cd apps/perf-bench \u0026\u0026 pnpm start\n   - Verify: Benchmarks run and display results\n   - Expected: No errors (uses only utils)\n\n**Success criteria:**\n- All examples run without errors\n- No import errors from removed packages\n- Each example produces expected output\n- No runtime errors related to missing types or functions","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:32.495407373+01:00","updated_at":"2025-12-25T11:27:38.18881154+01:00","dependencies":[{"issue_id":"webrun-vcs-gjxq","depends_on_id":"webrun-vcs-pzb","type":"blocks","created_at":"2025-12-25T10:55:16.924571665+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-97g","title":"Verify no circular dependencies","description":"Add a check for circular dependencies in the package structure.\n\n**Implementation:**\nRun circular dependency check:\n```bash\npnpm exec madge --circular packages/core/src/index.ts\npnpm exec madge --circular packages/transport/src/index.ts\npnpm exec madge --circular packages/commands/src/index.ts\n```\n\n**Success criteria:**\n- No circular dependencies detected between packages\n\n**Verification:**\n- All madge commands return with no cycles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:41:04.057465584+01:00","updated_at":"2025-12-25T11:09:10.32457856+01:00","closed_at":"2025-12-25T11:09:10.32457856+01:00","dependencies":[{"issue_id":"webrun-vcs-97g","depends_on_id":"webrun-vcs-2o0","type":"blocks","created_at":"2025-12-25T10:45:39.109001472+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-98l","title":"Implement file-based StagingStore","description":"Git-compatible .git/index implementation using FilesApi. Supports index versions 2, 3, 4. JGit refs: DirCache.java, DirCacheEntry.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.499670558+01:00","updated_at":"2025-12-22T02:10:06.518639188+01:00","closed_at":"2025-12-22T02:10:06.518639188+01:00","dependencies":[{"issue_id":"webrun-vcs-98l","depends_on_id":"webrun-vcs-esu","type":"blocks","created_at":"2025-12-22T00:24:18.247436777+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-53w","title":"Migrate staging tests","description":"Port tests from store-files/tests/staging/ and testing suites. Add JGit compatibility tests: DirCacheBasicTest, DirCacheCGitCompatabilityTest.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.846144044+01:00","updated_at":"2025-12-22T22:52:33.24801512+01:00","closed_at":"2025-12-22T22:52:33.24801512+01:00","dependencies":[{"issue_id":"webrun-vcs-53w","depends_on_id":"webrun-vcs-7rw","type":"blocks","created_at":"2025-12-22T00:24:28.963059604+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-7dr","title":"Implement exhaustive unit tests for RawStoreWithDelta and backend integrations","description":"## Overview\n\nThis epic tracks comprehensive unit test implementation for the RawStoreWithDelta class and its integration with various delta storage backends.\n\n## Goals\n\n- 90%+ line coverage for RawStoreWithDelta class\n- Test all delta operations: loose storage, deltification, undeltification\n- Test delta chain handling with various depths\n- Integration tests with PackDeltaStore backend\n- Edge case coverage (empty objects, large objects, deep chains)\n\n## Key Classes to Test\n\n1. **RawStoreWithDelta** (src/delta/raw-store-with-delta.ts)\n   - Implements RawStore interface with transparent delta support\n   - Loose object storage and retrieval\n   - Delta computation and application\n   - Delta chain resolution\n   - Undeltification (converting delta back to loose)\n\n2. **PackDeltaStore** (src/delta/pack-delta-store.ts)\n   - DeltaStore implementation using Git pack files\n   - Metadata index for delta relationships\n   - Pack file flush and management\n\n## Test Scenarios\n\n### RawStoreWithDelta Core Operations\n- store/load/has/delete for loose objects\n- keys() enumeration (loose + deltified)\n- size() for loose and deltified objects\n\n### Delta Operations\n- deltify() with single candidate\n- deltify() with multiple candidates (best compression selection)\n- deltify() respecting maxChainDepth\n- undeltify() converting back to loose\n- Delta chain resolution (depth 1, 2, n)\n\n### Backend Integration\n- With MemoryRawStore + MockDeltaStore\n- With MemoryRawStore + PackDeltaStore\n- Multi-pack scenarios\n\n### Edge Cases\n- Empty objects\n- Large objects\n- Maximum chain depth enforcement\n- Circular reference prevention\n- Objects existing in both loose and delta form","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T08:08:55.364224327+01:00","updated_at":"2025-12-25T10:20:18.691676207+01:00","closed_at":"2025-12-25T10:20:18.691676207+01:00","dependencies":[{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-3q7","type":"blocks","created_at":"2025-12-25T08:09:55.689235196+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-it8","type":"blocks","created_at":"2025-12-25T08:09:55.76274578+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-ddi","type":"blocks","created_at":"2025-12-25T08:09:55.824098722+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-2ol","type":"blocks","created_at":"2025-12-25T08:09:55.884148211+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-jpr","type":"blocks","created_at":"2025-12-25T08:09:55.945310197+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-0vy","type":"blocks","created_at":"2025-12-25T08:09:56.00704835+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7dr","depends_on_id":"webrun-vcs-p2i","type":"blocks","created_at":"2025-12-25T08:09:56.067898675+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-vvq","title":"Export Repository interface from core","description":"Export the Repository interface and RepositoryConfig type from core.\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\nAdd:\n```typescript\nexport * from \"./repository.js\";\n```\n\nThis exports:\n- Repository interface\n- RepositoryConfig interface\n\n**Verification:**\n- Import { Repository, RepositoryConfig } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:30.99963188+01:00","updated_at":"2025-12-25T10:50:38.715285205+01:00","closed_at":"2025-12-25T10:50:38.715285205+01:00"}
{"id":"webrun-vcs-ljw6","title":"Verify perf-bench works","description":"Verify perf-bench still works - uses only @webrun-vcs/utils which is allowed.\n\n**Current dependencies:** utils only\n**Target dependencies:** utils only (no changes needed)\n\nThis app only uses @webrun-vcs/utils for benchmarking delta ranges and binary delta operations.\n\n**Verification:** cd apps/perf-bench \u0026\u0026 pnpm start","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:17.00428774+01:00","updated_at":"2025-12-25T11:16:17.28624513+01:00","dependencies":[{"issue_id":"webrun-vcs-ljw6","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.673162209+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-dhvn","title":"Update examples-git imports","description":"Update examples-git to remove forbidden dependencies.\n\n**Current dependencies:** vcs, storage-git, utils\n**Target dependencies:** core, commands, utils\n\n**Files to update:**\n- apps/examples-git/src/shared/utils.ts\n- apps/examples-git/src/01-simple-roundtrip/01-simple-roundtrip.ts\n- apps/examples-git/src/02-delta-preservation/02-delta-preservation.ts\n- apps/examples-git/src/03-streaming-ofs-delta/03-streaming-ofs-delta.ts\n- apps/examples-git/src/04-full-verification/04-full-verification.ts\n- apps/examples-git/src/05-index-format-comparison/05-index-format-comparison.ts\n- apps/examples-git/src/06-high-level-api/06-high-level-api.ts\n- apps/examples-git/package.json\n\n**CRITICAL:** This package demonstrates low-level pack file operations. Options:\n1. Keep storage-git as devDependency for advanced examples\n2. Expose pack utilities through core/commands\n3. Refactor to use high-level API only\n\n**Import changes for high-level parts:**\n```typescript\n// REMOVE\nimport { FileMode, type PersonIdent } from \"@webrun-vcs/vcs\";\nimport { createGitRepository } from \"@webrun-vcs/storage-git\";\n\n// ADD\nimport { FileMode, type PersonIdent } from \"@webrun-vcs/core\";\nimport { Git } from \"@webrun-vcs/commands\";\n```\n\n**Verification:** cd apps/examples-git \u0026\u0026 pnpm examples","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:16.919640343+01:00","updated_at":"2025-12-25T11:15:54.368822467+01:00","dependencies":[{"issue_id":"webrun-vcs-dhvn","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.547651826+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-6nd","title":"Update worktree tests","description":"Update add-command.test.ts, status-calculator.test.ts, ignore tests to use core interfaces.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.518582467+01:00","updated_at":"2025-12-22T23:43:20.738639729+01:00","closed_at":"2025-12-22T23:43:20.738639729+01:00","dependencies":[{"issue_id":"webrun-vcs-6nd","depends_on_id":"webrun-vcs-vzj","type":"blocks","created_at":"2025-12-22T00:24:38.755366222+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-9b3","title":"[Phase 2.5] Delete CompositeObjectStorage","description":"Delete packages/storage-git/src/composite-object-storage.ts. Composition logic belongs in DeltaStorage. Remove export from index.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.285013311+01:00","updated_at":"2025-12-24T00:52:31.05593885+01:00","closed_at":"2025-12-24T00:52:31.05593885+01:00","dependencies":[{"issue_id":"webrun-vcs-9b3","depends_on_id":"webrun-vcs-9y5","type":"blocks","created_at":"2025-12-23T22:04:48.69464559+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-9b3","depends_on_id":"webrun-vcs-o1g","type":"blocks","created_at":"2025-12-23T22:04:17.427542781+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-vos","title":"Implement domain store unit tests (blob, tree, commit, tag)","description":"## Overview\n\nImplement unit tests for domain store interfaces in packages/core: BlobStore, TreeStore, CommitStore, and TagStore.\n\n## Target Files to Test\n\n| Source File | Interface | Key Methods |\n|-------------|-----------|-------------|\n| blob/blob-store.ts | BlobStore | store, load, has |\n| trees/tree-store.ts | TreeStore | storeTree, loadTree, getEntry, getEmptyTreeId |\n| commits/commit-store.ts | CommitStore | storeCommit, loadCommit, walkAncestry, findMergeBase, isAncestor |\n| tags/tag-store.ts | TagStore | storeTag, loadTag, getTarget |\n\n## Test Files to Create\n\n### packages/core/tests/stores/\n\n**blob-store.test.ts**\n```typescript\ndescribe(\"BlobStore\", () =\u003e {\n  it(\"should store and retrieve binary content\")\n  it(\"should compute correct SHA-1 for blob\")\n  it(\"should stream large blobs efficiently\")\n  it(\"should handle empty blob\")\n  it(\"should detect content corruption\")\n})\n```\n\n**tree-store.test.ts**\n```typescript\ndescribe(\"TreeStore\", () =\u003e {\n  describe(\"storeTree\", () =\u003e {\n    it(\"should sort entries canonically\")\n    it(\"should handle mixed file and directory entries\")\n    it(\"should compute correct SHA-1 for tree\")\n  })\n\n  describe(\"loadTree\", () =\u003e {\n    it(\"should parse tree format correctly\")\n    it(\"should handle all file modes (100644, 100755, 120000, 40000)\")\n    it(\"should iterate entries in order\")\n  })\n\n  describe(\"getEntry\", () =\u003e {\n    it(\"should find entry by name\")\n    it(\"should return undefined for missing entry\")\n  })\n\n  describe(\"edge cases\", () =\u003e {\n    it(\"should handle empty tree\")\n    it(\"should handle large directories (1000+ entries)\")\n    it(\"should handle special characters in names\")\n  })\n})\n```\n\n**commit-store.test.ts**\n```typescript\ndescribe(\"CommitStore\", () =\u003e {\n  describe(\"storeCommit\", () =\u003e {\n    it(\"should serialize commit with single parent\")\n    it(\"should serialize merge commit with multiple parents\")\n    it(\"should compute correct SHA-1\")\n  })\n\n  describe(\"loadCommit\", () =\u003e {\n    it(\"should parse commit format correctly\")\n    it(\"should extract all parent IDs\")\n    it(\"should parse author and committer with timezone\")\n  })\n\n  describe(\"walkAncestry\", () =\u003e {\n    it(\"should traverse linear history\")\n    it(\"should handle merge commits (visit all parents)\")\n    it(\"should stop at specified depth limit\")\n    it(\"should respect abort signal\")\n    it(\"should not visit same commit twice\")\n  })\n\n  describe(\"findMergeBase\", () =\u003e {\n    it(\"should find LCA of two commits\")\n    it(\"should handle multiple common ancestors\")\n    it(\"should handle disjoint histories (return null)\")\n  })\n\n  describe(\"isAncestor\", () =\u003e {\n    it(\"should return true for direct ancestor\")\n    it(\"should return true for transitive ancestor\")\n    it(\"should return false for non-ancestor\")\n    it(\"should handle self-reference (commit is its own ancestor?)\")\n  })\n})\n```\n\n**tag-store.test.ts**\n```typescript\ndescribe(\"TagStore\", () =\u003e {\n  describe(\"storeTag\", () =\u003e {\n    it(\"should serialize annotated tag\")\n    it(\"should include optional tagger field\")\n    it(\"should handle multi-line tag message\")\n  })\n\n  describe(\"loadTag\", () =\u003e {\n    it(\"should parse tag format correctly\")\n    it(\"should extract target object ID and type\")\n  })\n\n  describe(\"getTarget\", () =\u003e {\n    it(\"should return direct target\")\n    it(\"should peel through tag chains with peel=true\")\n    it(\"should handle tag pointing to commit, tree, or blob\")\n  })\n})\n```\n\n## JGit Test References\n\n- `RevWalkTest.java` - Commit graph traversal (17+ test methods)\n- `TreeWalkTest.java` / `CanonicalTreeParserTest.java` - Tree iteration (18+ test methods)\n- `RevTagTest.java` - Tag object handling\n\n## Key Edge Cases from JGit\n\n**TreeStore:**\n- Forward/backward iteration\n- Random seek/skip operations\n- Path name edge cases (special characters, huge names)\n- Attribute file location\n\n**CommitStore:**\n- Filter composition (ALL, NONE, custom)\n- Time-based filtering (CommitTimeRevFilter)\n- First-parent-only traversal\n- Boundary marking and flag propagation\n\n## Acceptance Criteria\n\n- [ ] BlobStore tests cover binary content handling\n- [ ] TreeStore tests verify canonical sorting\n- [ ] CommitStore tests cover ancestry traversal algorithms\n- [ ] TagStore tests verify tag chain peeling\n- [ ] Large dataset tests (1000+ entries, deep graphs)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:52:13.192667497+01:00","updated_at":"2025-12-25T07:28:58.448518737+01:00","closed_at":"2025-12-25T07:28:58.448518737+01:00"}
{"id":"webrun-vcs-o1g","title":"[Phase 1.2] Verify GitObjectStoreImpl uses RawStore pattern","description":"Verify packages/vcs/src/object-storage/git-codec/git-object-store.ts uses RawStore for persistence and VolatileStore for buffering. No changes expected.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:58:43.179852109+01:00","updated_at":"2025-12-24T00:40:15.612113706+01:00","closed_at":"2025-12-24T00:40:15.612113706+01:00"}
{"id":"webrun-vcs-3m3","title":"Migrate example-git-perf to high-level APIs","description":"Use createRepository() factory, typed stores, and WorkTree API from @webrun-vcs/worktree for checkout. Replace object loading with typed store methods. Use repository.commits.walkAncestry() for history traversal. Depends on Unicode path fix.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T09:53:57.00178577+01:00","updated_at":"2025-12-24T00:30:16.746293964+01:00","closed_at":"2025-12-24T00:30:16.746293964+01:00","dependencies":[{"issue_id":"webrun-vcs-3m3","depends_on_id":"webrun-vcs-am3","type":"blocks","created_at":"2025-12-23T09:54:14.92878095+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-40at","title":"Update example-pack-gc imports","description":"Update example-pack-gc to remove forbidden dependencies.\n\n**Current dependencies:** vcs, storage-git, utils\n**Target dependencies:** core, commands, utils\n\n**Files to update:**\n- apps/example-pack-gc/src/main.ts\n- apps/example-pack-gc/package.json\n\n**Import changes:**\n```typescript\n// REMOVE\nimport { createGitRepository, createGitStorage, type GitRepository } from \"@webrun-vcs/storage-git\";\nimport { FileMode, type ObjectId, type PersonIdent } from \"@webrun-vcs/vcs\";\n\n// ADD\nimport { Git } from \"@webrun-vcs/commands\";\nimport { FileMode, type ObjectId, type PersonIdent } from \"@webrun-vcs/core\";\n```\n\n**Note:** This example demonstrates GC. May need to expose GC through commands API or add GcCommand.\n\n**package.json changes:**\n- REMOVE: @webrun-vcs/vcs, @webrun-vcs/storage-git\n- ADD: @webrun-vcs/core, @webrun-vcs/commands\n\n**Verification:** cd apps/example-pack-gc \u0026\u0026 pnpm start","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:04.867974124+01:00","updated_at":"2025-12-25T11:15:36.19062408+01:00","dependencies":[{"issue_id":"webrun-vcs-40at","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.381397416+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-lhl6","title":"Update example-git-cycle imports","description":"Update example-git-cycle to remove forbidden dependencies.\n\n**Current dependencies:** core, vcs, storage-git, utils\n**Target dependencies:** core, commands, utils\n\n**Files to update:**\n- apps/example-git-cycle/src/shared/index.ts\n- apps/example-git-cycle/package.json\n\n**Import changes:**\n```typescript\n// REMOVE\nimport { createGitRepository, type GitRepository } from \"@webrun-vcs/storage-git\";\nimport { FileMode, type ObjectId, type PersonIdent } from \"@webrun-vcs/vcs\";\n\n// ADD\nimport { Git } from \"@webrun-vcs/commands\";\nimport { FileMode, type ObjectId, type PersonIdent } from \"@webrun-vcs/core\";\n```\n\n**package.json changes:**\n- REMOVE: @webrun-vcs/vcs, @webrun-vcs/storage-git\n- ADD: @webrun-vcs/commands\n\n**Code refactoring:**\n- Replace createGitRepository() with Git.open() or Git.init()\n- Update repository access patterns\n\n**Verification:** cd apps/example-git-cycle \u0026\u0026 pnpm start","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:04.530026518+01:00","updated_at":"2025-12-25T11:15:23.18719824+01:00","dependencies":[{"issue_id":"webrun-vcs-lhl6","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.127232587+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-7yo","title":"Migrate transport and commands packages to use core exclusively","description":"## Overview\n\nMigrate the `packages/transport` and `packages/commands` packages to use `@webrun-vcs/core` exclusively, eliminating dependencies on intermediate packages and consolidating the architecture.\n\n## Current State\n\n### packages/transport\n- **Dependencies**: @webrun-vcs/core, @webrun-vcs/utils\n- **Modules**:\n  - streams/ (5 files) - pack-receiver, progress-reporter, protocol-session, git-stream\n  - protocol/ (9 files) - pkt-line-codec, capabilities, ack-nak, sideband\n  - connection/ (5 files) - http-connection, git-connection, connection-factory\n  - storage-adapters/ (4 files) - vcs-repository-adapter, storage-adapter\n  - operations/ (4 files) - clone, push, fetch\n  - negotiation/ (6 files) - fetch-negotiator, push-negotiator, refspec, uri\n  - http-server/ (3 files) - git-http-server\n  - handlers/ (7 files) - upload-pack-handler, receive-pack-handler\n\n### packages/commands\n- **Dependencies**: @webrun-vcs/core, @webrun-vcs/transport, @webrun-vcs/utils, @webrun-vcs/worktree\n- **Modules**:\n  - commands/ (20+ files) - clone, push, pull, fetch, commit, merge, rebase, etc.\n  - results/ (13 files) - command results and diff formatter\n  - errors/ (12 files) - various error types\n\n## Goals\n\n1. Consolidate transport functionality into core or make it use only core interfaces\n2. Reduce commands package dependencies to only core\n3. Eliminate circular or unnecessary dependencies\n4. Maintain clean separation of concerns\n\n## Migration Strategy\n\n### Phase 1: Transport → Core Migration\n- Move core transport interfaces to packages/core\n- Refactor transport implementations to use core interfaces\n- Update storage adapters to work with core stores\n\n### Phase 2: Commands → Core Migration\n- Refactor commands to use core interfaces directly\n- Move worktree-related functionality to core or remove dependency\n- Update result types to align with core types\n\n### Phase 3: Cleanup\n- Remove deprecated code paths\n- Update all imports across the monorepo\n- Verify all tests pass\n\n## Success Criteria\n\n- [ ] Transport package uses only @webrun-vcs/core (no utils)\n- [ ] Commands package uses only @webrun-vcs/core (no transport, utils, worktree)\n- [ ] All existing tests pass\n- [ ] No circular dependencies\n- [ ] Clean package boundaries","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T08:11:06.243115944+01:00","updated_at":"2025-12-25T08:18:32.490523729+01:00","closed_at":"2025-12-25T08:18:32.490523729+01:00","dependencies":[{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-n9t","type":"blocks","created_at":"2025-12-25T08:12:04.093232037+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-ixl","type":"blocks","created_at":"2025-12-25T08:12:04.177339294+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-fjo","type":"blocks","created_at":"2025-12-25T08:12:04.244859066+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-5ne","type":"blocks","created_at":"2025-12-25T08:12:04.309711005+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-bpf","type":"blocks","created_at":"2025-12-25T08:12:04.3823386+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-yni","type":"blocks","created_at":"2025-12-25T08:12:04.46474611+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-exw","type":"blocks","created_at":"2025-12-25T08:12:04.540145622+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-7yo","depends_on_id":"webrun-vcs-a24","type":"blocks","created_at":"2025-12-25T08:12:08.646564064+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-vvo","title":"Move garbage collection to storage-git","description":"Move vcs/src/garbage-collection/ to storage-git/src/gc/. JGit refs: GC.java, PackInserter.java, PackStatistics.java, ObjectWalk.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:18.267315161+01:00","updated_at":"2025-12-22T01:38:24.840787016+01:00","closed_at":"2025-12-22T01:38:24.840787016+01:00","dependencies":[{"issue_id":"webrun-vcs-vvo","depends_on_id":"webrun-vcs-5in","type":"blocks","created_at":"2025-12-22T00:24:07.70268959+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-708","title":"[Phase 6.1] Update storage-git GC tests","description":"Update packages/storage-git/tests/gc/*.test.ts: Change mock implementations from ObjectStore to RawStore pattern.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:45.868195111+01:00","updated_at":"2025-12-24T01:03:11.979006803+01:00","closed_at":"2025-12-24T01:03:11.979006803+01:00","dependencies":[{"issue_id":"webrun-vcs-708","depends_on_id":"webrun-vcs-4hw","type":"blocks","created_at":"2025-12-23T22:03:27.171069374+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-1j7","title":"Add CI job for example apps verification","description":"Add GitHub Actions workflow that runs all example apps as part of CI pipeline. Should catch regressions in example code and verify they work with latest package versions.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T09:53:57.285582172+01:00","updated_at":"2025-12-24T00:33:56.001761709+01:00","closed_at":"2025-12-24T00:33:56.001761709+01:00","dependencies":[{"issue_id":"webrun-vcs-1j7","depends_on_id":"webrun-vcs-8xf","type":"blocks","created_at":"2025-12-23T09:54:15.648861907+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-clm","title":"Replace @webrun-vcs/utils hash imports in commands","description":"Replace hash utility imports from @webrun-vcs/utils with @webrun-vcs/core.\n\n**Files to modify:**\n- packages/commands/src/commands/fetch-command.ts\n- packages/commands/src/commands/clone-command.ts\n\n**Changes:**\nReplace:\n```typescript\nimport { bytesToHex, hexToBytes } from \"@webrun-vcs/utils/hash/utils\";\nimport { bytesToHex } from \"@webrun-vcs/utils/hash/utils\";\n```\n\nWith:\n```typescript\nimport { bytesToHex, hexToBytes } from \"@webrun-vcs/core\";\n```\n\n**Verification:**\n- grep -r \"@webrun-vcs/utils/hash\" packages/commands/src should return no results","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.022722719+01:00","updated_at":"2025-12-25T10:41:48.68368412+01:00","closed_at":"2025-12-25T10:41:48.68368412+01:00"}
{"id":"webrun-vcs-jpr","title":"Implement PackDeltaStore unit tests","description":"Test PackDeltaStore implementation comprehensively.\n\n## Test Cases\n\n### initialization\n- Initialize creates metadata index\n- Initialize is idempotent\n- Load from empty directory\n- Load from existing packs\n\n### storeDelta()\n- Store delta returns compressed size\n- Metadata index updated correctly\n- Pending pack receives object\n- Auto-flush on threshold\n\n### loadDelta()\n- Load stored delta returns correct instructions\n- Load returns undefined for non-delta\n- Load after flush works correctly\n- Delta[] format matches stored format\n\n### isDelta()\n- Returns true for stored deltas\n- Returns false for non-deltas\n- Works before and after flush\n\n### removeDelta()\n- Remove returns true for existing\n- Remove returns false for non-existent\n- Metadata index updated on remove\n\n### getDeltaChainInfo()\n- Returns correct depth\n- Returns correct chain\n- Returns correct sizes\n- Returns undefined for non-delta\n\n### listDeltas()\n- Lists all stored deltas\n- Includes pending deltas\n- Empty store returns empty iterator\n\n### flush()\n- Creates pack file\n- Updates metadata with pack info\n- Pending pack cleared after flush\n- Multiple flushes create multiple packs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:09:47.203606471+01:00","updated_at":"2025-12-25T10:20:13.149002735+01:00","closed_at":"2025-12-25T10:20:13.149002735+01:00"}
{"id":"webrun-vcs-ixl","title":"Migrate transport storage-adapters to core","description":"## Overview\n\nRefactor transport storage adapters to use core store interfaces exclusively.\n\n## Files to Migrate/Refactor\n\n**packages/transport/src/storage-adapters/**\n- storage-adapter.ts - Base storage adapter interface\n- repository-adapter.ts - Repository abstraction\n- vcs-repository-adapter.ts - VCS-specific adapter\n\n## Tasks\n\n1. Define repository adapter interface in core\n2. Update storage-adapter to use core RawStore, RefStore, etc.\n3. Refactor vcs-repository-adapter for core compatibility\n4. Remove any utils dependencies\n\n## Core Interfaces to Use\n\n- RawStore for object storage\n- RefStore for reference management\n- CommitStore, TreeStore, BlobStore for typed access\n- DeltaStore for delta operations\n\n## Acceptance Criteria\n\n- [ ] Adapters use only core store interfaces\n- [ ] No intermediate package dependencies\n- [ ] Repository abstraction cleanly defined\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:11:55.175243718+01:00","updated_at":"2025-12-25T08:18:32.064795679+01:00","closed_at":"2025-12-25T08:18:32.064795679+01:00"}
{"id":"webrun-vcs-wzu","title":"Export ref types from core index","description":"Export reference types needed by transport and commands.\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\nAdd:\n```typescript\nexport * from \"./refs/index.js\";\n```\n\nThis exports from refs/index.ts:\n- Ref, SymbolicRef types\n- RefStore interface\n- RefStoreLocation enum\n- RefUpdateResult type\n- isSymbolicRef() function\n\n**Verification:**\n- Import { Ref, SymbolicRef, RefStore } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.119105002+01:00","updated_at":"2025-12-25T10:50:38.719271774+01:00","closed_at":"2025-12-25T10:50:38.719271774+01:00"}
{"id":"webrun-vcs-kgx","title":"Migrate example-pack-gc to high-level APIs","description":"Use createRepository() factory and typed stores. Replace direct object stores with repository.blobs, .trees, .commits. Pack/gc operations are storage-implementation specific but should be documented as such.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T09:53:56.929854129+01:00","updated_at":"2025-12-23T22:36:18.551168779+01:00","closed_at":"2025-12-23T22:36:18.551168779+01:00"}
{"id":"webrun-vcs-3b1","title":"[Phase 2.1] Delete GitRawObjectStorage (@deprecated)","description":"Delete packages/storage-git/src/git-raw-objects-storage.ts (already @deprecated). Remove export from packages/storage-git/src/index.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:43.355512848+01:00","updated_at":"2025-12-24T00:52:31.045472671+01:00","closed_at":"2025-12-24T00:52:31.045472671+01:00","dependencies":[{"issue_id":"webrun-vcs-3b1","depends_on_id":"webrun-vcs-9y5","type":"blocks","created_at":"2025-12-23T22:02:45.821560843+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-3b1","depends_on_id":"webrun-vcs-o1g","type":"blocks","created_at":"2025-12-23T22:02:45.950922588+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-rjy","title":"Implement PackConsolidator class","description":"## Summary\n\nImplement `PackConsolidator` class that merges small packs during garbage collection.\n\n## File Location\n\n`packages/core/src/pack/pack-consolidator.ts`\n\n## Interface\n\n```typescript\nexport interface ConsolidateOptions {\n  minPackSize?: number;  // default: 1MB\n  maxPacks?: number;     // default: 50\n  onProgress?: (current: number, total: number) =\u003e void;\n}\n\nexport interface ConsolidateResult {\n  packsRemoved: number;\n  packsCreated: number;\n  objectsProcessed: number;\n  bytesReclaimed: number;\n}\n\nexport class PackConsolidator {\n  async shouldConsolidate(options?: ConsolidateOptions): Promise\u003cboolean\u003e;\n  async consolidate(options?: ConsolidateOptions): Promise\u003cConsolidateResult\u003e;\n}\n```\n\n## Consolidation Algorithm\n\n1. List all packs with sizes\n2. Identify packs smaller than threshold\n3. If many small packs exist:\n   a. Read all objects from small packs\n   b. Sort for optimal delta selection\n   c. Write to new pack\n   d. Generate index\n   e. Atomically replace files\n   f. Update metadata index\n\n## Atomic Replacement\n\n```typescript\nasync function atomicPackReplace(\n  files: FilesApi,\n  basePath: string,\n  toRemove: string[],\n  toAdd: { name: string; pack: Uint8Array; index: Uint8Array },\n): Promise\u003cvoid\u003e;\n```\n\n## JGit Reference\n\n- [GC.java repack()](tmp/jgit/org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/GC.java)\n\n## Tests Required\n\n- `packages/core/tests/pack/pack-consolidator.test.ts`\n- Threshold detection\n- Pack merging\n- Atomic file operations\n- Progress reporting","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:37.862020644+01:00","updated_at":"2025-12-25T08:16:40.930040649+01:00","closed_at":"2025-12-25T08:16:40.930040649+01:00","dependencies":[{"issue_id":"webrun-vcs-rjy","depends_on_id":"webrun-vcs-b81","type":"blocks","created_at":"2025-12-25T06:56:30.491176209+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-rjy","depends_on_id":"webrun-vcs-8vz","type":"blocks","created_at":"2025-12-25T06:56:30.430613116+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-8bc","title":"Support multiple backends in commands","description":"Git class should accept any Repository implementation. Add factory functions for different backends. JGit ref: Git.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:18.932140355+01:00","updated_at":"2025-12-22T23:57:39.744988776+01:00","closed_at":"2025-12-22T23:57:39.744988776+01:00","dependencies":[{"issue_id":"webrun-vcs-8bc","depends_on_id":"webrun-vcs-nw0","type":"blocks","created_at":"2025-12-22T00:24:45.866016356+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-6fb","title":"Create @webrun-vcs/utils package structure","description":"Initialize packages/utils with package.json, tsconfig.json, build config. First package in migration - blocks all others.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T00:22:01.456506992+01:00","updated_at":"2025-12-22T00:30:25.489340534+01:00","closed_at":"2025-12-22T00:30:25.489340534+01:00"}
{"id":"webrun-vcs-8xf","title":"Add automated test scripts for example apps","description":"Create test scripts that run all apps automatically with 'pnpm --filter @webrun-vcs/example-* test'. Ensure each app can be tested in isolation and as part of full suite. Add proper exit codes for CI.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T09:53:57.206753772+01:00","updated_at":"2025-12-24T00:33:55.871496379+01:00","closed_at":"2025-12-24T00:33:55.871496379+01:00","dependencies":[{"issue_id":"webrun-vcs-8xf","depends_on_id":"webrun-vcs-9lo","type":"blocks","created_at":"2025-12-23T09:54:15.572208976+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-z28n","title":"Fix storage-git package compatibility with core refactoring","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-25T11:25:43.390053203+01:00","updated_at":"2025-12-25T11:25:43.390053203+01:00"}
{"id":"webrun-vcs-nfq","title":"Create @webrun-vcs/core package structure","description":"Initialize packages/core with package.json, tsconfig.json, build config. Central API layer - all other packages depend on this.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T00:22:01.714481232+01:00","updated_at":"2025-12-22T00:58:37.419177142+01:00","closed_at":"2025-12-22T00:58:37.419177142+01:00","dependencies":[{"issue_id":"webrun-vcs-nfq","depends_on_id":"webrun-vcs-2cy","type":"blocks","created_at":"2025-12-22T00:23:54.888687328+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-ifi","title":"[Phase 5.1] Delete ObjectStore interface","description":"Delete packages/vcs/src/interfaces/object-store.ts - the main target of this migration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T21:58:45.605150327+01:00","updated_at":"2025-12-24T01:02:41.903080113+01:00","closed_at":"2025-12-24T01:02:41.903080113+01:00","dependencies":[{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-02g","type":"blocks","created_at":"2025-12-23T22:03:23.244746511+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-hwp","type":"blocks","created_at":"2025-12-23T22:03:23.370479226+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-zbi","type":"blocks","created_at":"2025-12-23T22:03:23.470771095+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-5no","type":"blocks","created_at":"2025-12-23T22:03:23.558568017+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-0gm","type":"blocks","created_at":"2025-12-23T22:03:23.669803183+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-umd","type":"blocks","created_at":"2025-12-23T22:03:23.76340873+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-ifi","depends_on_id":"webrun-vcs-abu","type":"blocks","created_at":"2025-12-23T22:03:23.875020531+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-do8","title":"Create hash utility re-exports in core","description":"Create a hash module in core that re-exports utilities from @webrun-vcs/utils.\n\n**Files to create:**\n- packages/core/src/hash/index.ts\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\n\nCreate packages/core/src/hash/index.ts:\n```typescript\n/**\n * Hash utilities re-exported from @webrun-vcs/utils\n * for convenient single-package imports\n */\nexport { bytesToHex, hexToBytes } from \"@webrun-vcs/utils/hash/utils\";\nexport { sha1 } from \"@webrun-vcs/utils\";\n```\n\nAdd to index.ts:\n```typescript\nexport * from \"./hash/index.js\";\n```\n\n**Verification:**\n- Import { bytesToHex, hexToBytes, sha1 } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.401829348+01:00","updated_at":"2025-12-25T10:38:15.094645873+01:00","closed_at":"2025-12-25T10:38:15.094645873+01:00","dependencies":[{"issue_id":"webrun-vcs-do8","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:36:48.874985613+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-74m","title":"Implement delta binary format conversion","description":"## Summary\n\nImplement functions to convert between format-agnostic Delta[] and Git binary delta format.\n\n## File Location\n\n`packages/core/src/delta/delta-binary-format.ts`\n\n## Functions\n\n```typescript\nimport type { Delta } from \"@webrun-vcs/utils\";\n\n/** Serialize Delta[] to Git binary delta format */\nexport function serializeDelta(delta: Delta[]): Uint8Array;\n\n/** Parse Git binary delta format to Delta[] */\nexport function parseBinaryDelta(data: Uint8Array): Delta[];\n\n/** Encode copy instruction (Git pack format) */\nexport function encodeCopyInstruction(offset: number, length: number): Uint8Array;\n\n/** Encode variable-length integer */\nexport function encodeVarint(value: number): Uint8Array;\n\n/** Decode variable-length integer */\nexport function decodeVarint(data: Uint8Array, offset: number): { value: number; bytesRead: number };\n```\n\n## Git Delta Format\n\n- Header: base_size (varint) + result_size (varint)\n- COPY instruction: 0x80 | flags, followed by offset/size bytes (little-endian)\n- INSERT instruction: 1-127 (length), followed by literal bytes\n\n## Constraints\n\n- Maximum copy size: 64KB (0x10000) per instruction\n- Maximum insert size: 127 bytes per instruction\n- Split larger operations into multiple instructions\n\n## JGit Reference\n\n- [DeltaEncoder.java](tmp/jgit/org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/DeltaEncoder.java)\n- [BinaryDelta.java](tmp/jgit/org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BinaryDelta.java)\n\n## Tests Required\n\n- `packages/core/tests/delta/delta-binary-format.test.ts`\n- Round-trip: Delta[] -\u003e binary -\u003e Delta[]\n- Compatibility with Git-generated deltas\n- Edge cases: empty deltas, large copies, large inserts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:05.107093478+01:00","updated_at":"2025-12-25T07:53:30.686394862+01:00","closed_at":"2025-12-25T07:53:30.686394862+01:00"}
{"id":"webrun-vcs-4wg","title":"Consolidate TempStore/VolatileStore naming to single canonical name","description":"## Description\n\nThe codebase has two names for the same interface:\n- `TempStore`/`TempContent` - original interface in `packages/vcs/src/interfaces/temp-store.ts`\n- `VolatileStore`/`VolatileContent` - type aliases in `packages/vcs/src/binary-storage/volatile/volatile-store.ts`\n\nAll active code uses `VolatileStore` naming. `TempStore` only exists for backward compatibility, but there are no external consumers.\n\n## Use VolatileStore\n1. Rename `temp-store.ts` to `volatile-store.ts` in interfaces\n2. Rename interfaces from `TempStore`/`TempContent` to `VolatileStore`/`VolatileContent`\n3. Add deprecated type aliases for `TempStore`/`TempContent` pointing to new names\n4. Update `binary-storage/volatile/volatile-store.ts` to just re-export from interfaces\n\n## Tests to Verify\n\n- `pnpm build` - all packages compile\n- `pnpm test` - all tests pass\n- Verify exports are correct: check `@webrun-vcs/vcs` and `@webrun-vcs/vcs/binary-storage` exports\n\n## Analysis Reference\n\nSee `notes/src/2025-12-22/01-volatile-vs-temp-store-analysis.md` for detailed usage patterns.\n\n## Notes\n\nThis is a refactoring task with no functional changes. Priority P4 (backlog) as it's purely cosmetic cleanup.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T00:28:31.397298607+01:00","updated_at":"2025-12-23T01:03:30.716006853+01:00","closed_at":"2025-12-23T01:03:30.716006853+01:00","dependencies":[{"issue_id":"webrun-vcs-4wg","depends_on_id":"webrun-vcs-24b","type":"blocks","created_at":"2025-12-23T00:28:38.208942116+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-b27","title":"Create transport-from-core import test","description":"Create a test verifying transport can import everything it needs from core.\n\n**Files to create:**\n- packages/transport/tests/core-imports.test.ts\n\n**Implementation:**\nTest that all types transport needs can be imported from core:\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport {\n  // Stores\n  CommitStore, TreeStore, TagStore, RefStore, GitObjectStore,\n  // Types\n  Ref, SymbolicRef, ObjectTypeCode, ObjectTypeString,\n  RefStoreLocation, RefUpdateResult, TreeEntry,\n  // Repository\n  Repository,\n  // Utilities\n  bytesToHex, hexToBytes, sha1,\n  compressBlock, decompressBlockPartial,\n} from '@webrun-vcs/core';\n\ndescribe('Transport core imports', () =\u003e {\n  it('can import all required types from core', () =\u003e {\n    expect(bytesToHex).toBeTypeOf('function');\n    expect(sha1).toBeTypeOf('function');\n    // ... verify all imports\n  });\n});\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/transport test should pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:31.990352355+01:00","updated_at":"2025-12-25T10:41:48.701153879+01:00","closed_at":"2025-12-25T10:41:48.701153879+01:00"}
{"id":"webrun-vcs-77c","title":"Phase 5: Cleanup and Verification","description":"Final cleanup and full verification of the refactoring.\n\nKey deliverables:\n1. Remove any unused package dependencies\n2. Full monorepo build verification\n3. Update package documentation/README files\n4. Final integration test\n\nDepends on: Phase 4 completion","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:33:34.13388966+01:00","updated_at":"2025-12-25T12:06:13.271867115+01:00","closed_at":"2025-12-25T12:06:13.271867115+01:00","dependencies":[{"issue_id":"webrun-vcs-77c","depends_on_id":"webrun-vcs-29i","type":"blocks","created_at":"2025-12-25T10:44:58.146337741+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-77c","depends_on_id":"webrun-vcs-i6u","type":"blocks","created_at":"2025-12-25T10:44:58.30559553+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-77c","depends_on_id":"webrun-vcs-nf7","type":"blocks","created_at":"2025-12-25T10:45:11.647652491+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-uvn","title":"Implement delta module unit tests","description":"## Overview\n\nImplement comprehensive unit tests for the delta module in packages/core/src/delta/.\n\n## Target Files to Test\n\n| Source File | Purpose |\n|-------------|---------|\n| raw-store-with-delta.ts | Transparent delta resolution, deltify/undeltify |\n| storage-analyzer.ts | Storage analysis, orphan detection |\n| packing-orchestrator.ts | Sliding window packing algorithm |\n| gc-controller.ts | Garbage collection scheduling |\n| delta-store.ts | Delta storage interface |\n\n## Test Files to Create\n\n### packages/core/tests/delta/\n\n**raw-store-with-delta.test.ts**\n```typescript\ndescribe(\"RawStoreWithDelta\", () =\u003e {\n  describe(\"transparent delta resolution\", () =\u003e {\n    it(\"should load full object when no delta exists\")\n    it(\"should resolve single-level delta chain\")\n    it(\"should resolve multi-level delta chain up to max depth\")\n    it(\"should fail when chain exceeds max depth\")\n    it(\"should cache resolved objects\")\n  })\n\n  describe(\"deltify operation\", () =\u003e {\n    it(\"should create delta when savings exceed threshold\")\n    it(\"should skip deltification for small objects\")\n    it(\"should respect minimum size threshold\")\n    it(\"should select best candidate from multiple options\")\n  })\n\n  describe(\"undeltify operation\", () =\u003e {\n    it(\"should convert delta back to full object\")\n    it(\"should update delta store after undeltify\")\n    it(\"should preserve object content exactly\")\n  })\n})\n```\n\n**storage-analyzer.test.ts**\n- analyzeAll: Scan all objects, report counts by type\n- analyzeFromRoots: Walk commit ancestry from roots\n- findOrphanedObjects: Identify unreachable objects\n\n**packing-orchestrator.test.ts**\n- Sliding window algorithm behavior\n- packAll, packFromRoots, packIncremental operations\n- Progress reporting and AbortSignal cancellation\n\n**gc-controller.test.ts**\n- Threshold-based triggering\n- quickPack for recent commits\n- runGC with chain breaking\n\n**resolve-delta-chain.test.ts** (migrate from storage-git)\n- ~300 lines from packages/storage-git/tests/delta/resolve-delta-chain.test.ts\n\n## JGit Test References\n\n**DeltaIndexTest.java** (13 test methods)\n- Insert whole objects (minimal to large sizes)\n- Copy whole objects (128, 123 byte variants)\n- Copy zero-filled data blocks\n- Shuffle segments (non-linear data layout)\n- Insert head/middle/tail operations\n- Size limit enforcement\n\n**BinaryDeltaTest.java**\n- Delta application correctness\n- Base and result size extraction\n- Copy command validation\n- Insert command validation\n\n**GcBasicPackingTest.java** (4 parameterized tests)\n- Prevent removing recently created packs\n- Immediate pack consolidation\n- Selective pack retention\n\n## Key Implementation Details\n\n- Default max delta chain depth: 10 (RawStoreWithDelta) / 50 (GCController)\n- Default minimum object size for deltification: 50 bytes\n- Default maximum compression ratio threshold: 0.75 (25% savings minimum)\n\n## Acceptance Criteria\n\n- [ ] RawStoreWithDelta tests cover chain resolution edge cases\n- [ ] StorageAnalyzer tests verify tree walking algorithms\n- [ ] PackingOrchestrator tests verify window management\n- [ ] GCController tests verify scheduling logic\n- [ ] Delta chain resolution tests migrated from storage-git\n- [ ] JGit edge cases ported where applicable","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T06:52:13.018152441+01:00","updated_at":"2025-12-25T07:20:19.370307332+01:00","closed_at":"2025-12-25T07:20:19.370307332+01:00","dependencies":[{"issue_id":"webrun-vcs-uvn","depends_on_id":"webrun-vcs-p48","type":"blocks","created_at":"2025-12-25T06:52:35.633835279+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-esu","title":"Create @webrun-vcs/staging package","description":"Initialize packages/staging with package.json, tsconfig.json. Depends on @webrun-vcs/core.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.875244139+01:00","updated_at":"2025-12-22T01:41:19.380355327+01:00","closed_at":"2025-12-22T01:41:19.380355327+01:00","dependencies":[{"issue_id":"webrun-vcs-esu","depends_on_id":"webrun-vcs-4ez","type":"blocks","created_at":"2025-12-22T00:24:18.164375078+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-upx","title":"[Phase 2.4-TEST] Write unit tests for DeltaStorage","description":"Write unit tests for DeltaStorage: test delegation to looseStore for writes, test fallback logic (looseStore first, then packReader), test with mock RawStore and PackReader.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.156977334+01:00","updated_at":"2025-12-24T00:57:29.733424629+01:00","closed_at":"2025-12-24T00:57:29.733424629+01:00","dependencies":[{"issue_id":"webrun-vcs-upx","depends_on_id":"webrun-vcs-nlt","type":"blocks","created_at":"2025-12-23T22:03:01.397039687+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-4cv","title":"VCS Architecture Refactoring","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T00:21:45.039409809+01:00","updated_at":"2025-12-23T01:04:17.927466119+01:00","closed_at":"2025-12-23T01:04:17.927466119+01:00","dependencies":[{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-vzj","type":"blocks","created_at":"2025-12-22T01:07:07.730295687+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-6yv","type":"blocks","created_at":"2025-12-22T01:07:08.285555737+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-x8g","type":"blocks","created_at":"2025-12-22T01:09:40.675894842+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-98l","type":"blocks","created_at":"2025-12-22T01:07:08.096393289+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-chv","type":"blocks","created_at":"2025-12-22T01:07:08.906330699+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-fv8","type":"blocks","created_at":"2025-12-22T01:07:07.669704199+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-anp","type":"blocks","created_at":"2025-12-22T01:07:08.346407858+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-4ez","type":"blocks","created_at":"2025-12-22T01:07:08.714767696+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-djb","type":"blocks","created_at":"2025-12-22T01:07:08.405921348+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-8bc","type":"blocks","created_at":"2025-12-22T01:07:07.299358237+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-d8e","type":"blocks","created_at":"2025-12-22T01:07:07.234205802+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-53w","type":"blocks","created_at":"2025-12-22T01:07:07.851304695+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-mh8","type":"blocks","created_at":"2025-12-22T01:07:08.223674183+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-5in","type":"blocks","created_at":"2025-12-22T01:07:08.654345611+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-24f","type":"blocks","created_at":"2025-12-22T01:07:08.467417131+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-4p0","type":"blocks","created_at":"2025-12-22T01:07:08.036086362+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-0k3","type":"blocks","created_at":"2025-12-22T01:07:08.968285932+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-ret","type":"blocks","created_at":"2025-12-22T01:07:08.594075983+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-51v","type":"blocks","created_at":"2025-12-22T01:07:08.774672708+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-2ye","type":"blocks","created_at":"2025-12-22T01:07:07.542094685+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-6nd","type":"blocks","created_at":"2025-12-22T01:07:07.607330688+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-6fb","type":"blocks","created_at":"2025-12-22T01:09:40.612739645+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-0ff","type":"blocks","created_at":"2025-12-22T01:07:07.789981733+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-m7h","type":"blocks","created_at":"2025-12-22T01:09:40.551731559+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-nw0","type":"blocks","created_at":"2025-12-22T01:07:07.358998666+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-17i","type":"blocks","created_at":"2025-12-22T01:07:07.972890464+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-2cy","type":"blocks","created_at":"2025-12-22T01:09:40.49067412+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-hol","type":"blocks","created_at":"2025-12-22T01:07:07.420355872+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-tzl","type":"blocks","created_at":"2025-12-22T01:07:07.16376244+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-nfq","type":"blocks","created_at":"2025-12-22T01:09:40.417725172+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-7rw","type":"blocks","created_at":"2025-12-22T01:07:07.912500587+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-24s","type":"blocks","created_at":"2025-12-22T01:07:08.845212525+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-esu","type":"blocks","created_at":"2025-12-22T01:07:08.160662737+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-vvo","type":"blocks","created_at":"2025-12-22T01:07:08.53243735+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-4cv","depends_on_id":"webrun-vcs-x5p","type":"blocks","created_at":"2025-12-22T01:07:07.482028695+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-ddi","title":"Test RawStoreWithDelta undeltify and delta chain resolution","description":"Test undeltification and delta chain resolution.\n\n## Test Cases\n\n### undeltify() method\n- Convert single delta back to loose object\n- Verify content matches original\n- isDelta() returns false after undeltify\n- Multiple undeltify calls (idempotent on loose objects)\n\n### Delta chain resolution\n- Resolve depth-1 delta (direct delta)\n- Resolve depth-2 delta chain\n- Resolve depth-n delta chain (up to maxChainDepth)\n- Chain resolution with mixed loose/delta bases\n\n### load() with delta objects\n- Load transparently resolves delta\n- Load with offset on deltified object\n- Load with length on deltified object\n- Performance: deep chains load correctly\n\n### getDeltaChainInfo()\n- Returns undefined for loose objects\n- Returns correct chain for depth-1\n- Returns correct chain for depth-n\n- Chain includes all intermediate objects\n\n### Edge cases\n- Broken delta chain (missing base)\n- Very deep chains\n- Objects that were both deltified and undeltified","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:09:15.743197948+01:00","updated_at":"2025-12-25T10:20:13.14105218+01:00","closed_at":"2025-12-25T10:20:13.14105218+01:00"}
{"id":"webrun-vcs-erb","title":"Phase 1: Update vcs Package Re-exports","description":"Verify that core and commands packages provide all APIs needed by examples.\n\nKey verifications:\n1. Core exports all required types (FileMode, ObjectId, PersonIdent, etc.)\n2. Commands provides Git high-level API (Git.open, Git.init, Git.wrap)\n3. Determine how to handle pack utilities (if examples need them)\n\nThis ensures examples can import from core and commands instead of vcs and storage-git.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-25T10:53:02.43874868+01:00","updated_at":"2025-12-25T11:14:44.271537592+01:00","dependencies":[{"issue_id":"webrun-vcs-erb","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:54:44.797763652+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-erb","depends_on_id":"webrun-vcs-ub79","type":"blocks","created_at":"2025-12-25T10:54:56.272489962+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-erb","depends_on_id":"webrun-vcs-6occ","type":"blocks","created_at":"2025-12-25T10:54:56.33969106+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-erb","depends_on_id":"webrun-vcs-zbwl","type":"blocks","created_at":"2025-12-25T11:15:06.431332912+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-dlq","title":"Update commands package.json dependencies","description":"Update commands package.json to remove @webrun-vcs/utils and @webrun-vcs/worktree dependencies.\n\n**File to modify:**\n- packages/commands/package.json\n\n**Before:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\",\n  \"@webrun-vcs/transport\": \"workspace:*\",\n  \"@webrun-vcs/utils\": \"workspace:*\",\n  \"@webrun-vcs/worktree\": \"workspace:*\"\n}\n```\n\n**After:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\",\n  \"@webrun-vcs/transport\": \"workspace:*\"\n}\n```\n\n**Note:** Keep devDependencies unchanged (store-mem, store-sql, storage-git for tests).\n\n**Verification:**\n- pnpm install should succeed\n- pnpm --filter @webrun-vcs/commands build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.289677857+01:00","updated_at":"2025-12-25T10:41:41.735110055+01:00","closed_at":"2025-12-25T10:41:41.735110055+01:00"}
{"id":"webrun-vcs-d8e","title":"Enhance commands error handling","description":"Consistent error types across all 26 commands. Helpful error messages for common failure scenarios.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:19.017494584+01:00","updated_at":"2025-12-23T00:11:29.730526437+01:00","closed_at":"2025-12-23T00:11:29.730526437+01:00","dependencies":[{"issue_id":"webrun-vcs-d8e","depends_on_id":"webrun-vcs-8bc","type":"blocks","created_at":"2025-12-22T00:24:45.947632903+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-5no","title":"[Phase 3.4] Delete typed storage wrappers","description":"Delete redundant typed storage wrappers (replaced by @webrun-vcs/vcs/object-storage): git-commit-storage.ts, git-file-tree-storage.ts, git-tag-storage.ts. Remove from index.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:45.092405598+01:00","updated_at":"2025-12-24T00:59:15.343905447+01:00","closed_at":"2025-12-24T00:59:15.343905447+01:00","dependencies":[{"issue_id":"webrun-vcs-5no","depends_on_id":"webrun-vcs-44a","type":"blocks","created_at":"2025-12-23T22:03:06.575177853+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5no","depends_on_id":"webrun-vcs-3b1","type":"blocks","created_at":"2025-12-23T22:03:06.501187737+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-2bd","title":"Implement missing unit tests for packages/core","description":"## Overview\n\nThis epic tracks the implementation of comprehensive unit tests for the packages/core module. The core module lacks adequate test coverage for critical subsystems including pack file handling, delta operations, reference storage, and domain stores.\n\n## Goals\n\n- Achieve 80%+ line coverage for core modules\n- Port key test scenarios from JGit test suite\n- Migrate existing tests from storage-git package\n- Create shared test infrastructure\n\n## Implementation Plan\n\nSee: [planning/2025-12-25/01-[vcs-refactoring]-missing-unit-tests-implementation.md](planning/2025-12-25/01-[vcs-refactoring]-missing-unit-tests-implementation.md)\n\n## Scope\n\n- **Phase 1 (P1)**: Pack file tests, Delta tests, Reference tests\n- **Phase 2 (P2)**: Domain store tests, Test infrastructure\n- **Phase 3 (P3)**: Binary storage tests, Utility tests\n\n## Success Criteria\n\n1. All tests pass in CI\n2. 80%+ line coverage for core modules\n3. Key JGit test scenarios covered\n4. Performance: No test takes longer than 5 seconds","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T06:52:01.902320802+01:00","updated_at":"2025-12-25T07:40:01.313748772+01:00","closed_at":"2025-12-25T07:40:01.313748772+01:00","dependencies":[{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-wm7","type":"blocks","created_at":"2025-12-25T07:00:57.815220468+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-pb2","type":"blocks","created_at":"2025-12-25T07:00:53.221757738+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-uvn","type":"blocks","created_at":"2025-12-25T07:00:53.290050636+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-igg","type":"blocks","created_at":"2025-12-25T07:00:53.35063132+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-vos","type":"blocks","created_at":"2025-12-25T07:00:53.428655216+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-496","type":"blocks","created_at":"2025-12-25T07:00:53.577347019+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-2bd","depends_on_id":"webrun-vcs-p48","type":"blocks","created_at":"2025-12-25T07:00:53.641259066+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-m7h","title":"Migrate stream utilities to @webrun-vcs/utils","description":"Move vcs/src/format/stream-utils.ts to utils/src/streams/. Includes: concat, splitStream, readHeader, mapStream, toLines, newSplitter, newByteSplitter, collect, asAsyncIterable.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T00:22:01.54351031+01:00","updated_at":"2025-12-22T00:30:25.492397101+01:00","closed_at":"2025-12-22T00:30:25.492397101+01:00","dependencies":[{"issue_id":"webrun-vcs-m7h","depends_on_id":"webrun-vcs-6fb","type":"blocks","created_at":"2025-12-22T00:23:48.723768996+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-amj","title":"Implement Pack-Based DeltaStore","description":"## Overview\n\nImplement a `PackDeltaStore` class that fulfills the `DeltaStore` interface using Git pack files for persistent delta storage. This bridges the logical delta layer with the physical pack layer for efficient on-disk storage.\n\n## Goals\n\n1. Provide persistent delta storage using Git pack file format\n2. Maintain compatibility with standard Git tools\n3. Support efficient multi-pack queries with caching\n4. Enable pack consolidation during garbage collection\n\n## Implementation Plan\n\nSee: [planning/2025-12-25/01-[core]-pack-delta-store-implementation.md](planning/2025-12-25/01-[core]-pack-delta-store-implementation.md)\n\n## Architecture Note\n\nSee: [notes/src/2025-12-25/01-[vcs-refactoring]-core-store-architecture.md](notes/src/2025-12-25/01-[vcs-refactoring]-core-store-architecture.md)\n\n## Phases\n\n1. **Core Infrastructure** - PackDirectory, DeltaMetadataIndex\n2. **Delta Format Conversion** - serializeDelta, parseBinaryDelta\n3. **PendingPack** - Write buffering with threshold-based flush\n4. **PackDeltaStore** - Full DeltaStore interface implementation\n5. **Pack Consolidation** - GC integration\n6. **Integration \u0026 Testing** - RawStoreWithDelta, GCController updates\n\n## Success Criteria\n\n- All existing tests pass\n- Git tools can read/verify generated packs\n- \u003c100ms single object lookup in 10k-object pack","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-25T06:54:15.308429785+01:00","updated_at":"2025-12-25T08:22:45.948424061+01:00","closed_at":"2025-12-25T08:22:45.948424061+01:00","dependencies":[{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-5je","type":"blocks","created_at":"2025-12-25T07:01:32.41046638+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-3ob","type":"blocks","created_at":"2025-12-25T07:01:32.550482954+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-rjy","type":"blocks","created_at":"2025-12-25T07:01:38.531795727+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-8vz","type":"blocks","created_at":"2025-12-25T07:01:32.130148955+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-acj","type":"blocks","created_at":"2025-12-25T07:01:32.197713614+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-74m","type":"blocks","created_at":"2025-12-25T07:01:32.257902936+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-amj","depends_on_id":"webrun-vcs-b81","type":"blocks","created_at":"2025-12-25T07:01:32.321149728+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-pzb","title":"Phase 3: Update Example Documentation","description":"Update README files and markdown documentation in examples.\n\nFiles to update:\n- apps/example-git-cycle/README.md\n- apps/example-git-push/README.md\n- apps/examples-git/README.md\n- apps/examples-git/src/*/*.md files\n\nDepends on: Phase 2 (example applications updated)","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-25T10:53:21.418640802+01:00","updated_at":"2025-12-25T10:53:21.418640802+01:00","dependencies":[{"issue_id":"webrun-vcs-pzb","depends_on_id":"webrun-vcs-0zlp","type":"blocks","created_at":"2025-12-25T10:54:44.507200668+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-pzb","depends_on_id":"webrun-vcs-ok6v","type":"blocks","created_at":"2025-12-25T10:54:57.041998306+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-pzb","depends_on_id":"webrun-vcs-fac7","type":"blocks","created_at":"2025-12-25T10:55:15.98420833+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-a24","title":"Migrate transport protocol module to core","description":"## Overview\n\nMove transport protocol interfaces and implementations to packages/core or refactor to use only core types.\n\n## Files to Migrate/Refactor\n\n**packages/transport/src/protocol/**\n- pkt-line-codec.ts - Git pkt-line encoding/decoding\n- capabilities.ts - Protocol capability negotiation\n- ack-nak.ts - ACK/NAK protocol messages\n- sideband.ts - Sideband multiplexing\n- report-status.ts - Push status reporting\n- constants.ts - Protocol constants\n- errors.ts - Protocol errors\n- types.ts - Protocol types\n\n## Tasks\n\n1. Identify which types belong in core vs transport\n2. Move core protocol types to packages/core/src/protocol/\n3. Update imports in transport to use core types\n4. Ensure pkt-line codec uses core binary utilities\n\n## Acceptance Criteria\n\n- [ ] Protocol types defined in core\n- [ ] Transport uses core protocol types\n- [ ] No @webrun-vcs/utils imports for protocol\n- [ ] Tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:11:54.983291518+01:00","updated_at":"2025-12-25T08:18:31.918079336+01:00","closed_at":"2025-12-25T08:18:31.918079336+01:00"}
{"id":"webrun-vcs-q45","title":"Update commands test infrastructure imports","description":"Update test helper files and all test files to use new import paths.\n\n**Files to update:**\n- packages/commands/tests/test-helper.ts\n- packages/commands/tests/backend-factories.ts\n- packages/commands/tests/transport-test-helper.ts\n- packages/commands/tests/*.test.ts (all test files)\n\n**Implementation:**\n1. Update test-helper.ts imports to use @webrun-vcs/core for VCS types\n2. Update backend-factories.ts if it imports from worktree\n3. Update transport-test-helper.ts for transport-related imports\n4. Search and replace worktree imports with core in all test files\n\n**Note:** \n- store-mem, store-sql, storage-git imports remain as they are dev dependencies\n- utils imports remain from @webrun-vcs/utils\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands test should pass all tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:39:01.02167852+01:00","updated_at":"2025-12-25T11:07:58.53201956+01:00","closed_at":"2025-12-25T11:07:58.53201956+01:00","dependencies":[{"issue_id":"webrun-vcs-q45","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:38.82349237+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-mh8","title":"Migrate storage-git tests","description":"Update tests for pack/, refs/, loose/, delta/, gc/. Port JGit test cases: PackTest, PackIndexTest, RefDirectoryTest, GCTest.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.789701568+01:00","updated_at":"2025-12-22T22:18:06.093505729+01:00","closed_at":"2025-12-22T22:18:06.093505729+01:00","dependencies":[{"issue_id":"webrun-vcs-mh8","depends_on_id":"webrun-vcs-6yv","type":"blocks","created_at":"2025-12-22T00:24:18.004623303+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-yil","title":"Remove ObjectStore Interface Migration","description":"Refactor storage architecture to remove ObjectStore interface. Replace all usages with RawStore + GitObjectStore, simplifying from 3 layers to 2 layers. Current: GitObjectStore → ObjectStore → RawStore. Target: GitObjectStore → RawStore.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-23T21:57:56.430724671+01:00","updated_at":"2025-12-24T01:03:48.740502991+01:00","closed_at":"2025-12-24T01:03:48.740502991+01:00"}
{"id":"webrun-vcs-b81","title":"Implement PendingPack class","description":"## Summary\n\nImplement `PendingPack` class that buffers objects before writing a complete pack file.\n\n## File Location\n\n`packages/core/src/pack/pending-pack.ts`\n\n## Interface\n\n```typescript\nexport interface PendingPackOptions {\n  maxObjects?: number;  // default: 100\n  maxBytes?: number;    // default: 10MB\n  volatile: VolatileStore;\n}\n\nexport interface FlushResult {\n  packName: string;\n  packData: Uint8Array;\n  indexData: Uint8Array;\n  entries: Array\u003c{ id: ObjectId; offset: number; crc32: number }\u003e;\n}\n\nexport class PendingPack {\n  addObject(id: ObjectId, type: PackObjectType, content: Uint8Array): void;\n  addDelta(id: ObjectId, baseId: ObjectId, delta: Uint8Array): void;\n  get objectCount(): number;\n  get size(): number;\n  shouldFlush(): boolean;\n  async flush(): Promise\u003cFlushResult\u003e;\n  clear(): void;\n}\n```\n\n## Implementation Details\n\n- Buffer entries in memory until threshold\n- Use PackWriterStream for pack generation\n- Generate unique pack names (timestamp + random)\n- Calculate CRC32 for each entry during flush\n\n## Pack Naming\n\n```typescript\nfunction generatePackName(): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 8);\n  return `pack-${timestamp}${random}`;\n}\n```\n\n## Tests Required\n\n- `packages/core/tests/pack/pending-pack.test.ts`\n- Object buffering\n- Threshold detection\n- Flush generates valid pack\n- Delta object handling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T06:55:05.211152962+01:00","updated_at":"2025-12-25T07:56:17.733287812+01:00","closed_at":"2025-12-25T07:56:17.733287812+01:00"}
{"id":"webrun-vcs-78t","title":"Update commands package.json dependencies","description":"Update commands package.json to remove @webrun-vcs/worktree dependency.\n\n**File to modify:**\n- packages/commands/package.json\n\n**Before:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\",\n  \"@webrun-vcs/transport\": \"workspace:*\",\n  \"@webrun-vcs/utils\": \"workspace:*\",\n  \"@webrun-vcs/worktree\": \"workspace:*\"\n}\n```\n\n**After:**\n```json\n\"dependencies\": {\n  \"@webrun-vcs/core\": \"workspace:*\",\n  \"@webrun-vcs/transport\": \"workspace:*\",\n  \"@webrun-vcs/utils\": \"workspace:*\"\n}\n```\n\n**Note:** Keep @webrun-vcs/utils as a dependency (it's acceptable).\nKeep devDependencies unchanged (store-mem, store-sql, storage-git for tests).\n\n**Verification:**\n- pnpm install should succeed\n- pnpm --filter @webrun-vcs/commands build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:39:00.854074576+01:00","updated_at":"2025-12-25T11:07:58.520453369+01:00","closed_at":"2025-12-25T11:07:58.520453369+01:00","dependencies":[{"issue_id":"webrun-vcs-78t","depends_on_id":"webrun-vcs-sco","type":"blocks","created_at":"2025-12-25T10:45:38.728220107+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-2qdf","title":"Full apps build verification","description":"Full build verification for all apps.\n\nCommands:\npnpm build\npnpm test\npnpm lint\n\nSuccess criteria:\n- All packages build successfully\n- All tests pass\n- No lint errors","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:32.57650287+01:00","updated_at":"2025-12-25T11:16:31.992948174+01:00","dependencies":[{"issue_id":"webrun-vcs-2qdf","depends_on_id":"webrun-vcs-pzb","type":"blocks","created_at":"2025-12-25T10:55:17.031906117+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-wft","title":"Add import path integration tests","description":"Create integration tests that verify import paths work correctly.\n\n**Files to create:**\n- packages/core/tests/exports.test.ts\n\n**Implementation:**\nCreate a test that imports all public exports and verifies they exist:\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport {\n  // All store interfaces\n  CommitStore, TreeStore, BlobStore, TagStore, RefStore,\n  // Repository\n  Repository, RepositoryConfig,\n  // Object types\n  ObjectType, ObjectTypeCode, ObjectTypeString,\n  // Refs\n  Ref, SymbolicRef, RefStoreLocation, RefUpdateResult,\n  // Format\n  PersonIdent,\n  // Hash utilities\n  bytesToHex, hexToBytes, sha1,\n  // Compression\n  compressBlock, decompressBlockPartial,\n  // Diff\n  MyersDiff, RawText,\n  // Staging\n  StagingStore,\n  // WorkingTree\n  WorkingTreeIterator,\n  // Files\n  FilesApi, FileMode,\n} from '@webrun-vcs/core';\n\ndescribe('Core exports', () =\u003e {\n  it('exports all required types and functions', () =\u003e {\n    // Verify each export exists\n    expect(bytesToHex).toBeDefined();\n    expect(hexToBytes).toBeDefined();\n    // ... etc\n  });\n});\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/core test should pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:31.746009455+01:00","updated_at":"2025-12-25T10:41:48.711443071+01:00","closed_at":"2025-12-25T10:41:48.711443071+01:00"}
{"id":"webrun-vcs-hwp","title":"[Phase 3.2] Update git-repository.ts constructor","description":"Update packages/storage-git/src/git-repository.ts: Change constructor from (rawStorage: ObjectStore) to (rawStore: RawStore, volatileStore: VolatileStore). Create GitObjectStoreImpl internally.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.569317805+01:00","updated_at":"2025-12-24T00:57:15.930917241+01:00","closed_at":"2025-12-24T00:57:15.930917241+01:00","dependencies":[{"issue_id":"webrun-vcs-hwp","depends_on_id":"webrun-vcs-nlt","type":"blocks","created_at":"2025-12-23T22:03:06.230215343+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-hwp","depends_on_id":"webrun-vcs-o4u","type":"blocks","created_at":"2025-12-23T22:03:06.312504631+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-syyx","title":"Fix vcs package broken structure and exports","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T11:06:26.02439732+01:00","updated_at":"2025-12-25T11:26:25.688780214+01:00","closed_at":"2025-12-25T11:26:25.688780214+01:00"}
{"id":"webrun-vcs-7xm","title":"Update commands core type imports","description":"Update all commands source files to import types from @webrun-vcs/core.\n\n**Files to check and update:**\n- packages/commands/src/git-command.ts\n- packages/commands/src/types.ts\n- packages/commands/src/git.ts\n- packages/commands/src/commands/*.ts (all command files)\n- packages/commands/src/results/*.ts\n\n**Types to ensure come from @webrun-vcs/core:**\n- ObjectId, Ref, SymbolicRef\n- Commit, PersonIdent, Tree, Blob, Tag\n- FileMode, MergeStage\n- BlobStore, TreeStore, CommitStore, RefStore, TagStore\n- Repository, RepositoryConfig\n- isSymbolicRef()\n\n**Implementation:**\n1. Review each file's imports\n2. Consolidate imports from @webrun-vcs/core\n3. Remove any duplicate or redundant imports\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands build should succeed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:30.743122878+01:00","updated_at":"2025-12-25T10:41:41.74021986+01:00","closed_at":"2025-12-25T10:41:41.74021986+01:00"}
{"id":"webrun-vcs-fym","title":"Export format types from core index","description":"Export format types (PersonIdent, CommitEntry, TagEntry).\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\nAdd:\n```typescript\nexport * from \"./format/index.js\";\n```\n\nThis exports:\n- PersonIdent class\n- CommitEntry, TagEntry types\n- Related formatting utilities\n\n**Verification:**\n- Import { PersonIdent } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.237583942+01:00","updated_at":"2025-12-25T10:50:38.723312293+01:00","closed_at":"2025-12-25T10:50:38.723312293+01:00"}
{"id":"webrun-vcs-ok6v","title":"Update example README files","description":"Update example README files to reflect new import patterns AND add comprehensive descriptions.\n\n**Files to update:**\n- apps/example-git-cycle/README.md\n- apps/example-git-push/README.md\n- apps/examples-git/README.md\n\n**Import pattern changes:**\n- Replace @webrun-vcs/vcs imports with @webrun-vcs/core\n- Replace @webrun-vcs/storage-git imports with @webrun-vcs/commands\n- Update createGitRepository examples to use Git.open() or Git.init()\n- Remove references to forbidden dependencies\n\n**REQUIRED: Document each example app with:**\n\n1. **Purpose and Description**\n   - What does this example demonstrate?\n   - What real-world use case does it cover?\n   - Target audience (beginner/advanced)\n\n2. **Dependencies Used**\n   - List all @webrun-vcs packages used with their purpose:\n     - @webrun-vcs/core - types and interfaces\n     - @webrun-vcs/commands - Git high-level API\n     - @webrun-vcs/transport - HTTP operations\n     - @webrun-vcs/utils - utilities (hash, compression, diff)\n\n3. **How It Works**\n   - Step-by-step explanation of the example flow\n   - Key functions/classes being demonstrated\n   - Expected output\n\n4. **Running Instructions**\n   - Installation steps (pnpm install)\n   - Run command (pnpm start or specific scripts)\n   - Any prerequisites (native git, etc.)\n\n**Example README structure:**\n```markdown\n# Example: [Name]\n\n## Overview\n[What this example demonstrates]\n\n## Dependencies\n- @webrun-vcs/core - VCS types (FileMode, ObjectId, PersonIdent)\n- @webrun-vcs/commands - Git class for repository operations\n- @webrun-vcs/utils - Hash utilities\n\n## How It Works\n[Step-by-step explanation]\n\n## Running the Example\n\\`\\`\\`bash\npnpm install\npnpm start\n\\`\\`\\`\n\n## Expected Output\n[Description of what to expect]\n```\n\n**Verification:**\n- Each README clearly explains the app's purpose\n- Dependencies are accurately listed with descriptions\n- Run instructions are complete and correct","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T10:54:32.322080974+01:00","updated_at":"2025-12-25T11:29:25.442316094+01:00","dependencies":[{"issue_id":"webrun-vcs-ok6v","depends_on_id":"webrun-vcs-0zlp","type":"blocks","created_at":"2025-12-25T10:55:22.398345623+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-pb2","title":"Migrate pack file tests from storage-git to core","description":"## Overview\n\nMigrate pack file tests from packages/storage-git/tests/pack/ to packages/core/tests/pack/ and add additional edge case tests based on JGit patterns.\n\n## Files to Migrate\n\n| File | Lines | Description |\n|------|-------|-------------|\n| pack-writer.test.ts | 650 | Pack file header writing, object serialization |\n| pack-reader.test.ts | 477 | Pack header parsing, object loading, delta resolution |\n| pack-index.test.ts | 454 | V1/V2 index parsing, binary search, prefix resolution |\n| pack-indexer.test.ts | 366 | Index creation, SHA-1 computation, thin pack handling |\n| pack-index-writer.test.ts | 290 | V2 index generation, entry sorting, CRC32 encoding |\n| **Total** | **2,237** | |\n\n## Source Files (storage-git)\n\n- [packages/storage-git/tests/pack/pack-writer.test.ts](packages/storage-git/tests/pack/pack-writer.test.ts)\n- [packages/storage-git/tests/pack/pack-reader.test.ts](packages/storage-git/tests/pack/pack-reader.test.ts)\n- [packages/storage-git/tests/pack/pack-index.test.ts](packages/storage-git/tests/pack/pack-index.test.ts)\n- [packages/storage-git/tests/pack/pack-indexer.test.ts](packages/storage-git/tests/pack/pack-indexer.test.ts)\n- [packages/storage-git/tests/pack/pack-index-writer.test.ts](packages/storage-git/tests/pack/pack-index-writer.test.ts)\n\n## Target Directory\n\n`packages/core/tests/pack/`\n\n## Migration Steps\n\n1. Create `packages/core/tests/pack/` directory\n2. Copy each test file from storage-git\n3. Update imports:\n   - Change `../../src/pack/index.js` to `../../src/pack/index.js` (verify path)\n   - Ensure `@webrun-vcs/utils` imports work\n4. Run tests to verify they pass\n5. Remove duplicates from storage-git (or mark as deprecated)\n\n## New Tests to Add\n\nBased on JGit's PackTest.java and PackWriterTest.java:\n\n**pack-format-edge-cases.test.ts**\n- Handle objects exceeding 2GB\n- Configurable streaming thresholds\n- Validate pack version number\n- Detect truncated pack files\n- Handle empty pack files\n\n**pack-delta-resolution.test.ts**\n- Resolve OFS_DELTA chains up to max depth\n- Resolve REF_DELTA with base in same pack\n- Fail gracefully on missing delta base\n- Handle circular delta references\n- Apply copy and insert delta commands\n\n## JGit Test References\n\n- `PackTest.java` - 6 test methods for reading objects\n- `BasePackWriterTest.java` - 30+ methods for pack generation\n- `PackIndexV1Test.java` / `PackIndexV2Test.java` - Index format tests\n\n## Acceptance Criteria\n\n- [ ] All 5 test files migrated successfully\n- [ ] Tests pass in CI\n- [ ] Import paths updated correctly\n- [ ] Edge case tests added based on JGit patterns","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T06:52:12.939345829+01:00","updated_at":"2025-12-25T07:16:21.829218986+01:00","closed_at":"2025-12-25T07:16:21.829218986+01:00","dependencies":[{"issue_id":"webrun-vcs-pb2","depends_on_id":"webrun-vcs-p48","type":"blocks","created_at":"2025-12-25T06:52:35.569656473+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-02g","title":"[Phase 3.1] Update typed-object-utils.ts to use GitObjectStore","description":"Update packages/storage-git/src/typed-object-utils.ts: Change function parameters from ObjectStore to GitObjectStore. Functions: storeCommit, storeTree, etc. Consider marking as deprecated in favor of typed stores.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.434554338+01:00","updated_at":"2025-12-24T00:57:15.934777295+01:00","closed_at":"2025-12-24T00:57:15.934777295+01:00","dependencies":[{"issue_id":"webrun-vcs-02g","depends_on_id":"webrun-vcs-3b1","type":"blocks","created_at":"2025-12-23T22:04:19.911015703+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-02g","depends_on_id":"webrun-vcs-44a","type":"blocks","created_at":"2025-12-23T22:04:20.001417051+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-24b","title":"Remove unused FileTempStore class","description":"## Description\n\n`FileTempStore` in `packages/storage-git/src/file-temp-store.ts` is dead code:\n- Exported from package but never imported anywhere in the codebase\n- Superseded by `FileVolatileStore` which does the same thing\n- Only reference is a documentation comment in `temp-store.ts`\n\n## Changes Required\n\n1. Delete `packages/storage-git/src/file-temp-store.ts`\n2. Remove export from `packages/storage-git/src/index.ts`\n3. Update comment in `packages/vcs/src/interfaces/temp-store.ts` (line 39) that mentions FileTempStore\n\n## Tests to Verify\n\n- Run `pnpm test` to ensure no tests depend on FileTempStore\n- Run `pnpm build` to verify no compilation errors\n- Grep for any remaining references: `grep -r 'FileTempStore' packages/`\n\n## Notes\n\nThis is a safe deletion - the class is exported but has zero consumers.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T00:28:15.211229362+01:00","updated_at":"2025-12-23T00:58:54.759414912+01:00","closed_at":"2025-12-23T00:58:54.759414912+01:00"}
{"id":"webrun-vcs-3b9","title":"[Phase 6.4] Run full test suite verification","description":"Run pnpm test to verify all tests pass after migration. Run pnpm build to verify build succeeds. Run pnpm exec tsc --noEmit for type checking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T21:58:46.334270942+01:00","updated_at":"2025-12-24T01:03:12.270360864+01:00","closed_at":"2025-12-24T01:03:12.270360864+01:00","dependencies":[{"issue_id":"webrun-vcs-3b9","depends_on_id":"webrun-vcs-lip","type":"blocks","created_at":"2025-12-23T22:03:27.560794368+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-3b9","depends_on_id":"webrun-vcs-lxe","type":"blocks","created_at":"2025-12-23T22:03:27.657175332+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-3b9","depends_on_id":"webrun-vcs-708","type":"blocks","created_at":"2025-12-23T22:03:27.458817695+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-noz","title":"Add high-level API examples to examples-git","description":"Keep existing low-level pack examples for education. Add new examples showing same operations via Repository API and typed stores. Document as internal/advanced examples vs high-level alternatives.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T09:53:57.067272089+01:00","updated_at":"2025-12-23T23:00:47.026392667+01:00","closed_at":"2025-12-23T23:00:47.026392667+01:00"}
{"id":"webrun-vcs-djb","title":"Implement Repository interface in storage-git","description":"Create git-repository.ts implementing core's Repository interface. Factory function: (files: FilesApi) =\u003e Repository.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:34.517565148+01:00","updated_at":"2025-12-22T02:08:35.377653876+01:00","closed_at":"2025-12-22T02:08:35.377653876+01:00","dependencies":[{"issue_id":"webrun-vcs-djb","depends_on_id":"webrun-vcs-24f","type":"blocks","created_at":"2025-12-22T00:24:17.700011006+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-zbi","title":"[Phase 3.3] Update git-storage.ts constructor","description":"Update packages/storage-git/src/git-storage.ts: Change constructor to take RawStore + VolatileStore instead of ObjectStore.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:44.816151679+01:00","updated_at":"2025-12-24T00:51:37.765447893+01:00","closed_at":"2025-12-24T00:51:37.765447893+01:00","dependencies":[{"issue_id":"webrun-vcs-zbi","depends_on_id":"webrun-vcs-nlt","type":"blocks","created_at":"2025-12-23T22:03:06.374952742+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-zbi","depends_on_id":"webrun-vcs-o4u","type":"blocks","created_at":"2025-12-23T22:03:06.434644108+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-3tu","title":"Add circular dependency check","description":"Add a check for circular dependencies in the package structure.\n\n**Implementation:**\n1. Install madge as dev dependency if not present\n2. Create a script or test that runs:\n```bash\npnpm exec madge --circular packages/core/src/index.ts\npnpm exec madge --circular packages/transport/src/index.ts\npnpm exec madge --circular packages/commands/src/index.ts\n```\n\n3. Add to package.json scripts:\n```json\n\"check:circular\": \"madge --circular packages/*/src/index.ts\"\n```\n\n**Success criteria:**\n- No circular dependencies detected\n- Script added for future CI use\n\n**Verification:**\n- pnpm check:circular returns no cycles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:31.837864376+01:00","updated_at":"2025-12-25T10:41:48.70565134+01:00","closed_at":"2025-12-25T10:41:48.70565134+01:00"}
{"id":"webrun-vcs-29i","title":"Full monorepo build verification","description":"Run full build and test suite across all packages.\n\n**Commands to run:**\n```bash\npnpm build\npnpm test\npnpm lint\npnpm format:check\n```\n\n**Success criteria:**\n- All packages build successfully\n- All tests pass across monorepo\n- No lint errors\n- Code formatting is correct\n\n**Verification:**\n- All commands complete with exit code 0","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:41:04.204807878+01:00","updated_at":"2025-12-25T12:05:34.921220317+01:00","closed_at":"2025-12-25T12:05:34.921220317+01:00","dependencies":[{"issue_id":"webrun-vcs-29i","depends_on_id":"webrun-vcs-nf7","type":"blocks","created_at":"2025-12-25T10:45:39.208940977+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-fbm","title":"Add core exports integration test","description":"Create integration test that verifies core exports all required types.\n\n**File to create:**\n- packages/core/tests/exports.test.ts\n\n**Implementation:**\nTest that all public exports exist and are correctly typed:\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport {\n  // Stores\n  CommitStore, TreeStore, BlobStore, TagStore, RefStore,\n  // Repository\n  Repository,\n  // Object types\n  ObjectType, ObjectTypeCode,\n  // Refs\n  Ref, SymbolicRef,\n  // Format\n  PersonIdent,\n  // Staging\n  StagingStore,\n  // WorkingTree\n  WorkingTreeIterator,\n  // Files\n  FilesApi, FileMode,\n} from '@webrun-vcs/core';\n\ndescribe('Core exports', () =\u003e {\n  it('exports all required types and functions', () =\u003e {\n    // Verify each export exists\n    expect(ObjectType).toBeDefined();\n    expect(FileMode).toBeDefined();\n  });\n});\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/core test should pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:41:03.955121059+01:00","updated_at":"2025-12-25T11:26:47.577154782+01:00","closed_at":"2025-12-25T11:26:47.577154782+01:00","dependencies":[{"issue_id":"webrun-vcs-fbm","depends_on_id":"webrun-vcs-2o0","type":"blocks","created_at":"2025-12-25T10:45:39.018810696+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-5in","title":"Rename store-files to storage-git","description":"Rename packages/store-files to packages/storage-git. Update package.json name to @webrun-vcs/storage-git. Update all workspace references.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:18.100785998+01:00","updated_at":"2025-12-22T01:23:01.538869633+01:00","closed_at":"2025-12-22T01:23:01.538869633+01:00","dependencies":[{"issue_id":"webrun-vcs-5in","depends_on_id":"webrun-vcs-4ez","type":"blocks","created_at":"2025-12-22T00:24:07.537011928+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-4p0","title":"Implement memory StagingStore","description":"Pure in-memory StagingStore implementation for testing and temporary operations. No persistence.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.591544233+01:00","updated_at":"2025-12-22T02:12:01.89312457+01:00","closed_at":"2025-12-22T02:12:01.89312457+01:00","dependencies":[{"issue_id":"webrun-vcs-4p0","depends_on_id":"webrun-vcs-esu","type":"blocks","created_at":"2025-12-22T00:24:28.714712103+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-0gm","title":"[Phase 4.1] Verify createFileObjectStores works without ObjectStore","description":"Verify packages/storage-git/src/object-storage/index.ts (createFileObjectStores) works without ObjectStore dependency.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T21:58:45.235728216+01:00","updated_at":"2025-12-24T00:59:15.339357824+01:00","closed_at":"2025-12-24T00:59:15.339357824+01:00","dependencies":[{"issue_id":"webrun-vcs-0gm","depends_on_id":"webrun-vcs-hwp","type":"blocks","created_at":"2025-12-23T22:03:12.796437599+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-a42","title":"Update transport test imports to use core","description":"Update all transport test files to import from @webrun-vcs/core.\n\n**Files to check and update:**\n- packages/transport/tests/storage-adapter.test.ts\n- packages/transport/tests/vcs-repository-adapter.test.ts\n- Any other test files importing from @webrun-vcs/utils\n\n**Implementation:**\n1. Search for all imports from @webrun-vcs/utils in tests/\n2. Replace with imports from @webrun-vcs/core\n3. Ensure ObjectTypeCode and other types come from core\n\n**Verification:**\n- pnpm --filter @webrun-vcs/transport test should pass all tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:29.826778902+01:00","updated_at":"2025-12-25T11:01:01.734807905+01:00","closed_at":"2025-12-25T11:01:01.734807905+01:00","dependencies":[{"issue_id":"webrun-vcs-a42","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:45:38.340527901+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-6occ","title":"Verify commands provides Git high-level API","description":"Verify @webrun-vcs/commands provides the Git class with factory methods that examples need.\n\n**Required from commands:**\n- Git.open(path) - open existing repository\n- Git.init(path) - initialize new repository  \n- Git.wrap(repository) - wrap a Repository instance\n\n**Verification:**\n```typescript\nimport { Git } from \"@webrun-vcs/commands\";\nconst git = await Git.open(\"/path/to/repo\");\n```\n\nExamples should use Git class instead of createGitRepository from storage-git.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:53:42.083150754+01:00","updated_at":"2025-12-25T11:26:47.580380878+01:00","closed_at":"2025-12-25T11:26:47.580380878+01:00"}
{"id":"webrun-vcs-5sz","title":"Full monorepo build verification","description":"Run full build and test suite across all packages.\n\n**Commands to run:**\n```bash\npnpm build\npnpm test\npnpm lint\npnpm format:check\n```\n\n**Success criteria:**\n- All packages build successfully\n- All tests pass across monorepo\n- No lint errors\n- Code formatting is correct\n\n**Verification:**\n- All commands complete with exit code 0","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:32.576031949+01:00","updated_at":"2025-12-25T10:41:41.742773374+01:00","closed_at":"2025-12-25T10:41:41.742773374+01:00"}
{"id":"webrun-vcs-5d9","title":"Create action plan for apps migration to high-level APIs","description":"Based on the diagnostics note, create a detailed action plan in planning/ folder. Plan must ensure all apps use ONLY high-level APIs: Porcelaine, Transport, and high-level stores (BlobStore, TreeStore, CommitStore, RefStore, TagStore, WorkTreeStore). Follow planning naming convention.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T08:48:06.8030573+01:00","updated_at":"2025-12-23T09:53:08.46572705+01:00","closed_at":"2025-12-23T09:53:08.46572705+01:00","dependencies":[{"issue_id":"webrun-vcs-5d9","depends_on_id":"webrun-vcs-3r2","type":"blocks","created_at":"2025-12-23T08:48:26.934877361+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-vzj","title":"Enhance worktree status calculator","description":"Compare HEAD, Index, and WorkTree. Detect modified, added, deleted, renamed files. Handle conflict markers. JGit ref: StatusCommand.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:08.335019809+01:00","updated_at":"2025-12-22T23:07:44.238763268+01:00","closed_at":"2025-12-22T23:07:44.238763268+01:00","dependencies":[{"issue_id":"webrun-vcs-vzj","depends_on_id":"webrun-vcs-0ff","type":"blocks","created_at":"2025-12-22T00:24:29.125368553+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-27u","title":"Apps Verification and High-Level API Migration","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-23T08:47:09.954156692+01:00","updated_at":"2025-12-24T00:33:56.138020754+01:00","closed_at":"2025-12-24T00:33:56.138020754+01:00","dependencies":[{"issue_id":"webrun-vcs-27u","depends_on_id":"webrun-vcs-1j7","type":"blocks","created_at":"2025-12-23T09:54:23.87357097+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-27u","depends_on_id":"webrun-vcs-noz","type":"blocks","created_at":"2025-12-23T09:54:23.959345375+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-27u","depends_on_id":"webrun-vcs-w7f","type":"blocks","created_at":"2025-12-23T08:53:07.444228125+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-b7fj","title":"Update example-git-push imports","description":"Update example-git-push to remove forbidden dependencies.\n\n**Current dependencies:** vcs, storage-git, transport, utils\n**Target dependencies:** core, commands, transport, utils\n\n**Files to update:**\n- apps/example-git-push/src/main.ts\n- apps/example-git-push/package.json\n\n**Import changes:**\n```typescript\n// REMOVE\nimport { createGitRepository, createGitStorage } from \"@webrun-vcs/storage-git\";\nimport { FileMode } from \"@webrun-vcs/vcs\";\n\n// ADD\nimport { Git } from \"@webrun-vcs/commands\";\nimport { FileMode } from \"@webrun-vcs/core\";\n```\n\n**package.json changes:**\n- REMOVE: @webrun-vcs/vcs, @webrun-vcs/storage-git\n- ADD: @webrun-vcs/core, @webrun-vcs/commands\n\n**Verification:** cd apps/example-git-push \u0026\u0026 pnpm start","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:04.778250645+01:00","updated_at":"2025-12-25T11:15:36.095683548+01:00","dependencies":[{"issue_id":"webrun-vcs-b7fj","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.290342078+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-7at","title":"Verify and complete staging module exports","description":"Verify that the staging module exports all types needed by commands package.\n\n**Files to check:**\n- packages/core/src/staging/index.ts\n- packages/core/src/staging/staging-store.ts (if exists)\n- packages/core/src/staging/staging-edits.ts\n\n**Required exports:**\n- StagingStore interface\n- UpdateStagingEntry type/class\n- DeleteStagingEntry type/class\n- StagingEntry types\n\n**Implementation:**\n1. Check what staging/index.ts currently exports\n2. Compare with what commands package needs from @webrun-vcs/worktree\n3. Add any missing exports\n4. If types don't exist, create them based on worktree package definitions\n\n**Verification:**\n- Import { StagingStore, UpdateStagingEntry, DeleteStagingEntry } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.966897375+01:00","updated_at":"2025-12-25T10:50:38.733196341+01:00","closed_at":"2025-12-25T10:50:38.733196341+01:00"}
{"id":"webrun-vcs-je0","title":"Create commands import validation test","description":"Create a test verifying commands can import from core and transport.\n\n**Files to create:**\n- packages/commands/tests/imports.test.ts\n\n**Implementation:**\nTest that commands can import all needed types:\n```typescript\nimport { describe, it, expect } from 'vitest';\n\n// From core\nimport {\n  ObjectId, Ref, SymbolicRef, PersonIdent, FileMode,\n  BlobStore, TreeStore, CommitStore, RefStore, TagStore,\n  Repository, StagingStore, WorkingTreeIterator,\n  bytesToHex, hexToBytes,\n  MyersDiff, RawText, RawTextComparator,\n} from '@webrun-vcs/core';\n\n// From transport\nimport {\n  push, fetch, clone,\n  createGitHttpServer,\n  createVcsRepositoryAdapter,\n} from '@webrun-vcs/transport';\n\ndescribe('Commands imports', () =\u003e {\n  it('can import all required types from core', () =\u003e {\n    expect(bytesToHex).toBeTypeOf('function');\n  });\n  \n  it('can import all required functions from transport', () =\u003e {\n    expect(push).toBeTypeOf('function');\n    expect(fetch).toBeTypeOf('function');\n    expect(clone).toBeTypeOf('function');\n  });\n});\n```\n\n**Verification:**\n- pnpm --filter @webrun-vcs/commands test should pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T10:36:32.283808874+01:00","updated_at":"2025-12-25T10:41:48.695262944+01:00","closed_at":"2025-12-25T10:41:48.695262944+01:00"}
{"id":"webrun-vcs-fac7","title":"Update examples-git markdown documentation","description":"Update markdown documentation in examples-git with new import patterns AND comprehensive descriptions.\n\n**Files to update:**\n- apps/examples-git/src/03-streaming-ofs-delta/03-streaming-ofs-delta.md\n- apps/examples-git/src/04-full-verification/04-full-verification.md\n- apps/examples-git/src/05-index-format-comparison/05-index-format-comparison.md\n\n**Import pattern changes:**\n- Update code examples to use @webrun-vcs/core for types\n- Update code examples to use @webrun-vcs/commands for Git operations\n- Remove references to @webrun-vcs/vcs and @webrun-vcs/storage-git\n\n**REQUIRED: Each markdown file must include:**\n\n1. **Purpose and Description**\n   - What concept/feature does this example demonstrate?\n   - Why is this important for understanding Git internals?\n   - What problem does it solve?\n\n2. **Dependencies and Packages Used**\n   - List imported packages with their role:\n     - @webrun-vcs/core - (list specific types used)\n     - @webrun-vcs/commands - (list specific functions used)\n     - @webrun-vcs/utils - (list specific utilities used)\n\n3. **Technical Explanation**\n   - How the feature works internally\n   - Key algorithms or data structures\n   - Relationship to native Git behavior\n\n4. **Code Examples**\n   - Working code samples with updated imports\n   - Comments explaining each step\n   - Expected output\n\n**Example structure for each markdown:**\n```markdown\n# [Feature Name]\n\n## Overview\n[What this demonstrates and why it matters]\n\n## Dependencies\nThis example uses:\n- @webrun-vcs/core - FileMode, TreeEntry types\n- @webrun-vcs/commands - Git class for operations\n- @webrun-vcs/utils - sha1 for hashing\n\n## How It Works\n[Technical explanation]\n\n## Example Code\n\\`\\`\\`typescript\nimport { FileMode, TreeEntry } from \"@webrun-vcs/core\";\nimport { Git } from \"@webrun-vcs/commands\";\n// ...\n\\`\\`\\`\n\n## Running This Example\n[Instructions]\n```\n\n**Verification:**\n- Code examples compile without import errors\n- Dependencies are accurately documented\n- Technical explanations are clear and correct","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T10:54:32.402610677+01:00","updated_at":"2025-12-25T11:29:26.707154116+01:00","dependencies":[{"issue_id":"webrun-vcs-fac7","depends_on_id":"webrun-vcs-0zlp","type":"blocks","created_at":"2025-12-25T10:55:16.822936164+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-o055","title":"Update example-vcs-http-roundtrip imports","description":"Update example-vcs-http-roundtrip to remove forbidden dependencies.\n\nCurrent dependencies: vcs, storage-git, transport, utils\nTarget dependencies: core, commands, transport, utils\n\nFiles to update:\n- apps/example-vcs-http-roundtrip/src/main.ts\n- apps/example-vcs-http-roundtrip/src/shared/vcs-http-server.ts\n- apps/example-vcs-http-roundtrip/package.json\n\nImport changes:\n- REMOVE: imports from storage-git and vcs\n- ADD: Git from commands, types from core\n\nNote: HTTP server may need significant refactoring if it uses low-level storage-git APIs.\n\nVerification: cd apps/example-vcs-http-roundtrip \u0026\u0026 pnpm start","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T10:54:16.828056455+01:00","updated_at":"2025-12-25T11:16:04.017937616+01:00","dependencies":[{"issue_id":"webrun-vcs-o055","depends_on_id":"webrun-vcs-erb","type":"blocks","created_at":"2025-12-25T10:55:16.457216481+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-17i","title":"Implement StagingBuilder and StagingEditor","description":"StagingBuilder for bulk operations, StagingEditor for targeted modifications. JGit refs: DirCacheBuilder.java, DirCacheEditor.java.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:51.673779019+01:00","updated_at":"2025-12-22T22:30:09.549443115+01:00","closed_at":"2025-12-22T22:30:09.549443115+01:00","dependencies":[{"issue_id":"webrun-vcs-17i","depends_on_id":"webrun-vcs-98l","type":"blocks","created_at":"2025-12-22T00:24:28.796144271+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-962","title":"Create compression utility re-exports in core","description":"Create a compression module in core that re-exports utilities from @webrun-vcs/utils.\n\n**Files to create:**\n- packages/core/src/compression/index.ts\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\n\nCreate packages/core/src/compression/index.ts:\n```typescript\n/**\n * Compression utilities re-exported from @webrun-vcs/utils\n * for convenient single-package imports\n */\nexport { compressBlock, decompressBlockPartial } from \"@webrun-vcs/utils\";\n```\n\nAdd to index.ts:\n```typescript\nexport * from \"./compression/index.js\";\n```\n\n**Verification:**\n- Import { compressBlock, decompressBlockPartial } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.587241176+01:00","updated_at":"2025-12-25T10:38:15.098560271+01:00","closed_at":"2025-12-25T10:38:15.098560271+01:00","dependencies":[{"issue_id":"webrun-vcs-962","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:36:41.980656181+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-5ju","title":"Phase 1: Expand Core Package Exports","description":"Expand core/src/index.ts to export all modules needed by transport and commands.\n\nKey deliverables:\n1. Export all store interfaces (CommitStore, TreeStore, BlobStore, TagStore, RefStore)\n2. Export Repository interface and types\n3. Export object types (ObjectTypeCode, ObjectTypeString)\n4. Export ref types (Ref, SymbolicRef, RefStoreLocation, RefUpdateResult)\n5. Export format types (PersonIdent, CommitEntry, TagEntry)\n6. Export/add WorkingTreeIterator and StagingStore interfaces\n\nNote: Hash, compression, and diff utilities remain imported directly from @webrun-vcs/utils.\n\nThis phase must complete before Phase 2 and 3 can begin.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T10:33:17.071111642+01:00","updated_at":"2025-12-25T11:00:09.208428577+01:00","closed_at":"2025-12-25T11:00:09.208428577+01:00","dependencies":[{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-0x2","type":"blocks","created_at":"2025-12-25T10:44:05.148754778+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-vvq","type":"blocks","created_at":"2025-12-25T10:44:05.326502869+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-wzu","type":"blocks","created_at":"2025-12-25T10:44:05.493808938+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-fym","type":"blocks","created_at":"2025-12-25T10:44:05.65116901+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-z86","type":"blocks","created_at":"2025-12-25T10:44:05.812843366+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ju","depends_on_id":"webrun-vcs-7at","type":"blocks","created_at":"2025-12-25T10:44:05.991651093+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-ep5","title":"Create diff utility re-exports in core","description":"Create a diff module in core that re-exports diff utilities from @webrun-vcs/utils.\n\n**Files to create:**\n- packages/core/src/diff/index.ts\n\n**Files to modify:**\n- packages/core/src/index.ts\n\n**Implementation:**\n\nCreate packages/core/src/diff/index.ts:\n```typescript\n/**\n * Diff utilities re-exported from @webrun-vcs/utils\n * for convenient single-package imports\n */\nexport { MyersDiff, RawText, RawTextComparator, type EditList } from \"@webrun-vcs/utils\";\n```\n\nAdd to index.ts:\n```typescript\nexport * from \"./diff/index.js\";\n```\n\n**Verification:**\n- Import { MyersDiff, RawText } from \"@webrun-vcs/core\" should work","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T10:36:31.726947853+01:00","updated_at":"2025-12-25T10:38:15.103690516+01:00","closed_at":"2025-12-25T10:38:15.103690516+01:00","dependencies":[{"issue_id":"webrun-vcs-ep5","depends_on_id":"webrun-vcs-5ju","type":"blocks","created_at":"2025-12-25T10:36:42.128152889+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-5ne","title":"Migrate transport handlers to core","description":"## Overview\n\nRefactor transport handlers (upload-pack, receive-pack) to use core interfaces exclusively.\n\n## Files to Migrate/Refactor\n\n**packages/transport/src/handlers/**\n- upload-pack-handler.ts - Handle git-upload-pack requests\n- receive-pack-handler.ts - Handle git-receive-pack requests\n- protocol-v2-handler.ts - Git protocol v2 handling\n- negotiation-state.ts - Negotiation state management\n- shallow-negotiation.ts - Shallow clone negotiation\n\n## Dependencies\n\n- Requires protocol migration complete\n- Requires storage-adapters migration complete\n\n## Tasks\n\n1. Update handlers to use core pack types\n2. Refactor negotiation to use core ref/commit stores\n3. Update shallow handling for core compatibility\n4. Remove utils dependencies\n\n## Acceptance Criteria\n\n- [ ] Handlers use only core interfaces\n- [ ] Upload-pack serves objects from core stores\n- [ ] Receive-pack writes to core stores\n- [ ] All handler tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:11:55.487686712+01:00","updated_at":"2025-12-25T08:18:32.193826836+01:00","closed_at":"2025-12-25T08:18:32.193826836+01:00","dependencies":[{"issue_id":"webrun-vcs-5ne","depends_on_id":"webrun-vcs-a24","type":"blocks","created_at":"2025-12-25T08:12:18.907734246+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-5ne","depends_on_id":"webrun-vcs-ixl","type":"blocks","created_at":"2025-12-25T08:12:18.9812948+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-bpf","title":"Migrate commands package to use core exclusively","description":"## Overview\n\nRefactor the commands package to depend only on @webrun-vcs/core, removing dependencies on transport, utils, and worktree.\n\n## Current Dependencies to Remove\n\n- @webrun-vcs/transport → Use core transport interfaces\n- @webrun-vcs/utils → Use core utilities\n- @webrun-vcs/worktree → Move worktree to core or inline\n\n## Files to Refactor\n\n**packages/commands/src/commands/** (20+ files)\n- clone-command.ts, fetch-command.ts, push-command.ts, pull-command.ts\n- commit-command.ts, merge-command.ts, rebase-command.ts\n- checkout-command.ts, branch-command.ts, tag-command.ts\n- add-command.ts, rm-command.ts, status-command.ts\n- cherry-pick-command.ts, revert-command.ts\n- stash-*.ts, diff-command.ts, log-command.ts\n- reset-command.ts, describe-command.ts, remote-command.ts, ls-remote-command.ts\n\n**packages/commands/src/results/** (13 files)\n- Update result types to use core types\n\n**packages/commands/src/errors/** (12 files)\n- Consolidate with core error types if applicable\n\n## Tasks\n\n1. Audit all imports to identify non-core dependencies\n2. Move/inline worktree functionality to core\n3. Update transport command base to use core interfaces\n4. Refactor each command for core compatibility\n5. Update package.json dependencies\n\n## Acceptance Criteria\n\n- [ ] package.json shows only @webrun-vcs/core dependency\n- [ ] All commands work with core stores\n- [ ] No utils/transport/worktree imports\n- [ ] All command tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:11:55.58627987+01:00","updated_at":"2025-12-25T08:18:32.258125704+01:00","closed_at":"2025-12-25T08:18:32.258125704+01:00","dependencies":[{"issue_id":"webrun-vcs-bpf","depends_on_id":"webrun-vcs-fjo","type":"blocks","created_at":"2025-12-25T08:12:25.373403479+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-bpf","depends_on_id":"webrun-vcs-5ne","type":"blocks","created_at":"2025-12-25T08:12:25.444375308+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-bpf","depends_on_id":"webrun-vcs-yni","type":"blocks","created_at":"2025-12-25T08:12:25.518235894+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-496","title":"Implement utility function tests (varint)","description":"## Overview\n\nImplement unit tests for utility functions in packages/core, particularly the varint encoding module.\n\n## Target Files to Test\n\n| Source File | Functions |\n|-------------|-----------|\n| utils/varint.ts | Variable-length integer encoding/decoding |\n\n## Test Files to Create\n\n### packages/core/tests/utils/\n\n**varint.test.ts**\n```typescript\ndescribe(\"Varint encoding\", () =\u003e {\n  describe(\"encode\", () =\u003e {\n    it(\"should encode small integers (\u003c 128) in 1 byte\")\n    it(\"should encode medium integers (128-16383) in 2 bytes\")\n    it(\"should encode large integers (\u003e 16383) in 3+ bytes\")\n    it(\"should handle zero\")\n    it(\"should handle maximum safe integer\")\n  })\n\n  describe(\"decode\", () =\u003e {\n    it(\"should decode single-byte values\")\n    it(\"should decode multi-byte values\")\n    it(\"should return bytes consumed\")\n    it(\"should handle truncated input\")\n  })\n\n  describe(\"round-trip\", () =\u003e {\n    it(\"should encode and decode back to original value\")\n    it(\"should work for all values 0-1000000\")\n  })\n\n  describe(\"pack header encoding\", () =\u003e {\n    it(\"should encode object type and size\")\n    it(\"should decode object type and size\")\n  })\n})\n```\n\n## Implementation Notes\n\nVarint encoding is used extensively in Git pack files:\n- Object size encoding in pack headers\n- Delta offset encoding (OFS_DELTA)\n- Delta instruction sizes\n\nThe encoding uses 7 bits per byte with MSB as continuation flag.\n\n## Test Values to Cover\n\n| Value | Expected Bytes |\n|-------|----------------|\n| 0 | 1 byte: 0x00 |\n| 127 | 1 byte: 0x7F |\n| 128 | 2 bytes: 0x80 0x01 |\n| 16383 | 2 bytes: 0xFF 0x7F |\n| 16384 | 3 bytes: 0x80 0x80 0x01 |\n\n## Acceptance Criteria\n\n- [ ] All encode/decode edge cases covered\n- [ ] Round-trip property tests pass\n- [ ] Pack header encoding tests pass\n- [ ] Maximum value handling verified","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T06:52:13.364821981+01:00","updated_at":"2025-12-25T07:30:18.609420527+01:00","closed_at":"2025-12-25T07:30:18.609420527+01:00"}
{"id":"webrun-vcs-x8g","title":"Migrate type definitions to core","description":"Move ObjectId, ObjectType, FileMode, PersonIdent, TreeEntry from vcs/src/object-storage/interfaces/types.ts to core/src/types/.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:22:01.800922393+01:00","updated_at":"2025-12-22T01:02:07.787028576+01:00","closed_at":"2025-12-22T01:02:07.787028576+01:00","dependencies":[{"issue_id":"webrun-vcs-x8g","depends_on_id":"webrun-vcs-nfq","type":"blocks","created_at":"2025-12-22T00:23:54.973737665+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-kw5","title":"[Phase 2.3-TEST] Write unit tests for PackReader","description":"Write comprehensive unit tests for the new PackReader interface: test load(), has(), getSize(), list(), refresh() methods. Test with mock pack files and verify read-only behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T21:58:43.94818444+01:00","updated_at":"2025-12-24T00:57:29.728891382+01:00","closed_at":"2025-12-24T00:57:29.728891382+01:00","dependencies":[{"issue_id":"webrun-vcs-kw5","depends_on_id":"webrun-vcs-o4u","type":"blocks","created_at":"2025-12-23T22:03:01.29494653+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-nw0","title":"Update commands imports to use core","description":"Replace @webrun-vcs/vcs with @webrun-vcs/core. Add dependencies on staging, worktree, transport packages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T00:23:18.847413119+01:00","updated_at":"2025-12-22T23:52:00.188976311+01:00","closed_at":"2025-12-22T23:52:00.188976311+01:00","dependencies":[{"issue_id":"webrun-vcs-nw0","depends_on_id":"webrun-vcs-6nd","type":"blocks","created_at":"2025-12-22T00:24:39.076579892+01:00","created_by":"daemon"},{"issue_id":"webrun-vcs-nw0","depends_on_id":"webrun-vcs-hol","type":"blocks","created_at":"2025-12-22T00:24:45.781027851+01:00","created_by":"daemon"}]}
{"id":"webrun-vcs-ppp","title":"Migrate example-git-cycle to high-level APIs","description":"Replace direct storage operations with typed stores: use repository.blobs.store(), repository.trees.storeTree(), repository.commits.storeCommit(), and repository.refs.set(). Consider using Porcelaine Git.wrap().commit() for commit workflow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T09:53:38.347872479+01:00","updated_at":"2025-12-23T22:28:33.296943122+01:00","closed_at":"2025-12-23T22:28:33.296943122+01:00"}
